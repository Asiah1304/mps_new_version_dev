{"ast":null,"code":"import _objectSpread from\"/Users/syahrilsulaiman/mps_new_version/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/syahrilsulaiman/mps_new_version/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/syahrilsulaiman/mps_new_version/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import react,{useState}from\"react\";import{setUserSession}from'./Utils/Common';import{TextInputField,Heading,Button,BuildIcon}from\"evergreen-ui\";import logo1 from\"./assets/img/logo1.png\";import GoogleLogin from'react-google-login';import{setGoogleToken}from'./Utils/Common';import IndexNavbar from\"./components/Navbars/IndexNavbar2.js\";import Footer from\"./components/Footers/Footer\";import ggl from\"./assets/img/google-icon.svg\";import swal from\"sweetalert\";function Login(props){sessionStorage.removeItem('GoogleToken');sessionStorage.removeItem('GoogleEmail');sessionStorage.removeItem('GoogleName');var responseGoogle=function responseGoogle(response){console.log(response);var formdata=new FormData();formdata.append(\"email\",response.profileObj.email);var requestOptions={method:'POST',body:formdata,redirect:'follow'};var urlAPI1='https://mymps.corrad.my/int/api_generator.php?api_name=check_user';fetch(urlAPI1,requestOptions).then(function(response){return response.json();}).then(function(result){setLoading(false);if(result.status==\"success\"){console.log(result.data[0]);setUserSession(btoa(result.data[0]),result.data[0][\"MPS_USERNAME\"],result.data[0][\"MPS_USERIC\"],result.data[0][\"MPS_USEREMAIL\"],result.data[0][\"MPS_USERROLE\"]);props.history.push('/home');}else if(result.status==\"unsuccess\"){sessionStorage.setItem(\"GoogleEmail\",response.tt.$t);sessionStorage.setItem(\"GoogleToken\",response.tokenId);sessionStorage.setItem(\"GoogleName\",response.profileObj.givenName);props.history.push(\"./verifyuser\");}}).catch(function(error){console.log(error);swal(\"Opss!\",\"Something went wrong. Please contact your administrator!\",\"error\").then(function(value){//props.history.push('/');\n});});};var username=useFormInput(\"\");var password=useFormInput(\"\");var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleLogin=function handleLogin(){setError(null);setLoading(true);if(username.value==\"\"||password.value==\"\"){swal(\"Opss!\",\"Sila pastikan kata nama dan kata laluan anda sah\",\"error\");setLoading(false);}else{var sha256=require('js-sha256');var formdata=new FormData();formdata.append(\"email\",username.value);formdata.append(\"password\",sha256(password.value));var requestOptions={method:'POST',body:formdata,redirect:'follow'};var urlAPI1='https://mymps.corrad.my/int/api_generator.php?api_name=api_login';fetch(urlAPI1,requestOptions).then(function(response){return response.json();}).then(function(result){setLoading(false);if(result.status==\"unsuccess\"){console.log(\"Wrong credentials. Please try again!\");swal(\"Opss!\",\"Sila pastikan kata nama dan kata laluan anda sah\",\"error\");}else if(result.status==\"success\"){setUserSession(btoa(result.data[0]),result.data[0][\"MPS_USERNAME\"],result.data[0][\"MPS_USERIC\"],result.data[0][\"MPS_USEREMAIL\"]);props.history.push('/home');}}).catch(function(error){console.log(error);swal(\"Opss!\",\"Something went wrong. Please contact your administrator!\",\"error\").then(function(value){//props.history.push('/');\n});});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray\",children:[/*#__PURE__*/_jsx(IndexNavbar,{fixed:true}),/*#__PURE__*/_jsx(\"section\",{className:\"py-20 px-5 relative\",style:_defineProperty({background:\"rgb(34,81,122)\"},\"background\",\"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\"),children:/*#__PURE__*/_jsx(\"div\",{class:\"min-h-screen flex items-center justify-center  px-4 sm:px-6\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"max-w-md w-full\",style:{marginTop:\"-100px\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{class:\"mx-auto w-auto\",src:logo1,alt:\"mymps\",style:{height:\"120px\"}}),/*#__PURE__*/_jsx(\"h2\",{class:\"mt-6 text-center text-xl leading-9 font-extrabold text-white\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"form\",{class:\"mt-8\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"remember\",value:\"true\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({\"aria-label\":\"Email\"},username),{},{name:\"email\",type:\"email\",required:true,class:\"mb-2 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",placeholder:\"Kad Pengenalan\"}))}),/*#__PURE__*/_jsx(\"div\",{class:\"-mt-px\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({\"aria-label\":\"Password\"},password),{},{name:\"password\",type:\"password\",required:true,class:\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",placeholder:\"Kata Laluan\"}))})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"mt-6 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"flex items-center\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/register\",class:\"text-sm text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\",children:\"Daftar Pengguna\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"text-sm leading-5\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/forgotpassword\",class:\"font-medium text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\",children:\"Terlupa kata laluan ?\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"mt-6 flex flex-wrap\",children:[/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"438559173225-ub4mfh6vkmnd0qntmper0a48gqv18nn5.apps.googleusercontent.com\",onSuccess:responseGoogle,render:function render(renderProps){return/*#__PURE__*/_jsxs(Button,{type:\"button\",onClick:renderProps.onClick,disabled:renderProps.disabled,class:\"mb-3 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-gray-600 hover:bg-gray-500 hover:text-gray focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",fullWidth:true,variant:\"contained\",style:{marginTop:\"-10px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:ggl,style:{width:\"15px\",height:\"15px\",marginRight:\"7px\",marginTop:\"2px\"}}),\"Google\"]});},buttonText:\"Login\",cookiePolicy:'single_host_origin'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleLogin,class:\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-green-600 hover:bg-green-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",children:loading?'Loading...':'Login'})]})]})]})})}),/*#__PURE__*/_jsx(Footer,{})]});}var useFormInput=function useFormInput(initialValue){var _useState5=useState(initialValue),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];var handleChange=function handleChange(e){setValue(e.target.value);};return{value:value,onChange:handleChange};};export default Login;","map":{"version":3,"sources":["/Users/syahrilsulaiman/mps_new_version/src/Login.js"],"names":["react","useState","setUserSession","TextInputField","Heading","Button","BuildIcon","logo1","GoogleLogin","setGoogleToken","IndexNavbar","Footer","swal","Login","props","sessionStorage","removeItem","responseGoogle","response","console","log","formdata","FormData","append","profileObj","email","requestOptions","method","body","redirect","urlAPI1","fetch","then","json","result","setLoading","status","data","btoa","history","push","setItem","tt","$t","tokenId","givenName","catch","error","value","username","useFormInput","password","setError","loading","handleLogin","sha256","require","background","marginTop","height","renderProps","onClick","disabled","ggl","width","marginRight","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import react, {useState} from \"react\";\nimport { setUserSession } from './Utils/Common';\nimport { TextInputField, Heading, Button, BuildIcon } from \"evergreen-ui\";\nimport logo1 from \"./assets/img/logo1.png\";\nimport GoogleLogin from 'react-google-login';\nimport { setGoogleToken } from './Utils/Common';\n\nimport IndexNavbar from \"./components/Navbars/IndexNavbar2.js\";\nimport Footer from \"./components/Footers/Footer\";\nimport ggl from \"./assets/img/google-icon.svg\";\nimport swal from \"sweetalert\";\n\nfunction Login(props){\n\n    sessionStorage.removeItem('GoogleToken');\n    sessionStorage.removeItem('GoogleEmail');\n    sessionStorage.removeItem('GoogleName');\n\n    const responseGoogle = (response) => {\n\n        console.log(response);\n\n        var formdata = new FormData();\n        formdata.append(\"email\", response.profileObj.email);\n\n        var requestOptions = {\n            method: 'POST',\n            body: formdata,\n            redirect: 'follow'\n        };\n\n        var urlAPI1 = 'https://mymps.corrad.my/int/api_generator.php?api_name=check_user';\n\n        fetch(urlAPI1 , requestOptions)\n        .then(response => response.json())\n        .then(result => {\n\n            setLoading(false);\n\n            if(result.status == \"success\")\n            {\n                console.log(result.data[0]);\n                setUserSession(btoa(result.data[0]), result.data[0][\"MPS_USERNAME\"], result.data[0][\"MPS_USERIC\"], result.data[0][\"MPS_USEREMAIL\"], result.data[0][\"MPS_USERROLE\"]);\n                props.history.push('/home');\n            }\n            else if(result.status == \"unsuccess\")\n            {\n                sessionStorage.setItem(\"GoogleEmail\", response.tt.$t);\n                sessionStorage.setItem(\"GoogleToken\", response.tokenId);\n                sessionStorage.setItem(\"GoogleName\", response.profileObj.givenName);\n                props.history.push(\"./verifyuser\");\n            }\n        })\n        .catch(error => {\n            console.log(error);\n            swal(\"Opss!\", \"Something went wrong. Please contact your administrator!\", \"error\")\n            .then((value) => {\n                //props.history.push('/');\n            })\n        });\n        \n    }\n\n    const username = useFormInput(\"\");\n    const password = useFormInput(\"\");\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    const handleLogin = () => {\n        setError(null);\n        setLoading(true);\n\n        if(username.value == \"\" || password.value == \"\"){\n\n            swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\n            setLoading(false);\n\n        }else{\n\n            var sha256 = require('js-sha256');\n\n            var formdata = new FormData();\n            formdata.append(\"email\", username.value);\n            formdata.append(\"password\", sha256(password.value));\n\n            var requestOptions = {\n                method: 'POST',\n                body: formdata,\n                redirect: 'follow'\n            };\n\n            var urlAPI1 = 'https://mymps.corrad.my/int/api_generator.php?api_name=api_login';\n\n            fetch(urlAPI1 , requestOptions)\n            .then(response => response.json())\n            .then(result => {\n\n                setLoading(false);\n\n                if(result.status == \"unsuccess\")\n                {\n                    console.log(\"Wrong credentials. Please try again!\");\n                    swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\n                }\n                else if(result.status == \"success\")\n                {\n                    setUserSession(btoa(result.data[0]), result.data[0][\"MPS_USERNAME\"], result.data[0][\"MPS_USERIC\"], result.data[0][\"MPS_USEREMAIL\"]);\n                    props.history.push('/home');\n                }\n\n            })\n            .catch(error => {\n\n                console.log(error);\n                swal(\"Opss!\", \"Something went wrong. Please contact your administrator!\", \"error\")\n                .then((value) => {\n                    //props.history.push('/');\n                })\n\n            });\n        }\n        \n\n    }\n\n    return (\n        <div className=\"bg-gray\">\n            <IndexNavbar fixed />\n        <section className=\"py-20 px-5 relative\" style={{background: \"rgb(34,81,122)\", background: \"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\"}}>\n        <div class=\"min-h-screen flex items-center justify-center  px-4 sm:px-6\">\n            <div class=\"max-w-md w-full\" style={{marginTop: \"-100px\"}}>\n                <div>\n                <img class=\"mx-auto w-auto\" src={logo1} alt=\"mymps\" style={{height: \"120px\"}}/>\n                <h2 class=\"mt-6 text-center text-xl leading-9 font-extrabold text-white\">\n                    Login\n                </h2>\n                </div>\n                <form class=\"mt-8\">\n                <input type=\"hidden\" name=\"remember\" value=\"true\" />\n                <div class=\"rounded-md shadow-sm\">\n                    <div>\n                    <input aria-label=\"Email\" {...username} name=\"email\" type=\"email\" required class=\"mb-2 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\" placeholder=\"Kad Pengenalan\" />\n                    </div>\n                    <div class=\"-mt-px\">\n                    <input aria-label=\"Password\" {...password} name=\"password\" type=\"password\" required class=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\" placeholder=\"Kata Laluan\" />\n                    </div>\n                </div>\n\n                <div class=\"mt-6 flex items-center justify-between\">\n                    <div class=\"flex items-center\">\n                    <a href=\"/register\" class=\"text-sm text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\">\n                        Daftar Pengguna\n                    </a>\n                    </div>\n\n                    <div class=\"text-sm leading-5\">\n                    <a href=\"/forgotpassword\" class=\"font-medium text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\">\n                        Terlupa kata laluan ?\n                    </a>\n                    </div>\n                </div>\n\n                <div class=\"mt-6 flex flex-wrap\">\n                    <GoogleLogin\n                        clientId=\"438559173225-ub4mfh6vkmnd0qntmper0a48gqv18nn5.apps.googleusercontent.com\"\n                        onSuccess={responseGoogle}\n                        render={renderProps => (\n                        <Button \n                            type=\"button\"\n                            onClick={renderProps.onClick} \n                            disabled={renderProps.disabled}\n                            class=\"mb-3 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-gray-600 hover:bg-gray-500 hover:text-gray focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                            fullWidth\n                            variant=\"contained\"\n                            style={{marginTop:\"-10px\"}}\n                        >\n                            <img src={ggl} style={{width: \"15px\", height: \"15px\", marginRight: \"7px\", marginTop: \"2px\"}} /> \n                            Google\n                        </Button>\n                        )}\n                        buttonText=\"Login\"\n                        cookiePolicy={'single_host_origin'}\n                    />\n                    <button type=\"button\" onClick={handleLogin} class=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-green-600 hover:bg-green-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\">\n                        {loading ? 'Loading...' : 'Login'}\n                    </button>\n                </div>\n                </form>\n            </div>\n        </div>\n        </section>\n        {/* <section className=\"pb-16 bg-gray-300 relative pt-32\">\n            <div className=\"container mx-auto\">\n                <div className=\"flex flex-wrap justify-center bg-white shadow-2xl rounded-lg -mt-64 py-16 px-10 relative z-10\">\n                    <div className=\"w-full text-center lg:w-8/12\">\n                    <p className=\"text-center\">\n                        <img className=\"mx-auto\" src={logo1} style={{height:\"150px\", width:\"150px\"}}></img>\n                    </p>\n                    <Heading size={700} marginTop=\"default\">Login MyMPS</Heading>\n                    <p className=\"text-gray-600 text-lg leading-relaxed mt-4 mb-4\">\n                        Cause if you do, it can be yours now. Hit the buttons below to\n                        navigate to get the Free version for your next project. Build a\n                        new web app or give an old project a new look!\n                    </p>\n                    <div className=\"sm:block flex flex-col mt-10\">\n                        <div className=\"text-left p-5\">\n                        <TextInputField\n                            label=\"KATA NAMA / USERNAME\"\n                            //hint=\"This is a hint.\"\n                            placeholder=\"cth: 203451057890\"\n                            onKeyUp={handleNumber}\n                            {...username}\n                        />\n\n                        <TextInputField\n                            label=\"KATA LALUAN / PASSWORD\"\n                            //hint=\"This is a hint.\"\n                            placeholder=\"cth: abcd1234@^\"\n                            type=\"password\" \n                            {...password}\n                        />\n                        </div>\n                    \n                        <div className=\"top-29-px\">\n\n                            <Button \n                                marginRight={16} \n                                appearance=\"primary\" \n                                intent=\"success\"\n                                value={loading ? 'Loading...' : 'Login'} \n                                onClick={handleLogin} \n                                disabled={loading}\n                            >\n                                    Login\n                            </Button>\n\n                            <Button \n                                marginRight={16} \n                                appearance=\"primary\" \n                                intent=\"none\"\n                                onClick={ () => window.location.href = \"/daftar\"}\n                            >\n                            Daftar\n                            </Button>\n\n                        </div>\n                    </div>\n                    <div className=\"text-center mt-16\"></div>\n                    </div>\n                </div>\n            </div>\n        </section> */}\n        <Footer />\n        </div>\n    )\n    \n}\n\nconst useFormInput = initialValue => {\n    const [value, setValue] = useState(initialValue);\n   \n    const handleChange = e => {\n      setValue(e.target.value);\n    }\n    return {\n      value,\n      onChange: handleChange\n    }\n  }\n   \nexport default Login;"]},"metadata":{},"sourceType":"module"}