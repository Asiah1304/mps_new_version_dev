{"ast":null,"code":"import _objectSpread from\"/Users/syahrilsulaiman/Desktop/mps_new_version_dev-1/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/syahrilsulaiman/Desktop/mps_new_version_dev-1/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState}from\"react\";import swal from\"sweetalert\";// components\nvar useFormInput=function useFormInput(initialValue){var _useState=useState(initialValue),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var handleChange=function handleChange(e){setValue(e.target.value);};return{value:value,onChange:handleChange};};export default function CardSettings(_ref){var _ref$notel=_ref.notel,notel=_ref$notel===void 0?\"\":_ref$notel;console.log(notel);var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var username=sessionStorage.getItem('username');var email=sessionStorage.getItem('email');var nokp=sessionStorage.getItem('nokp');var handleUpdate=function handleUpdate(){var username=document.getElementById(\"username\").value;var email=document.getElementById(\"email\").value;var notel=document.getElementById(\"notel\").value;if(username==\"\"){swal(\"Opss!\",\"Kata nama tidak boleh dikosongkan.\",\"error\");return false;}else if(email==\"\"){swal(\"Opss!\",\"Emel tidak boleh dikosongkan\",\"error\");return false;}else if(notel==\"\"){swal(\"Opss!\",\"Nombor telefon tidak boleh dikosongkan\",\"error\");return false;}else{var formdata=new FormData();formdata.append(\"username\",username.trim());formdata.append(\"email\",email.trim());formdata.append(\"nokp\",nokp);formdata.append(\"notel\",notel.trim());var requestOptions={method:'POST',body:formdata,redirect:'follow'};var urlAPI=\"https://mymps.corrad.my/int/api_generator.php?api_name=update_profile\";fetch(urlAPI,requestOptions).then(function(response){return response.json();}).then(function(result){if(result.status==\"success\"){setLoading(\"false\");swal(\"Berjaya!\",\"Akaun profil anda sudah dikemaskini.\",\"success\");sessionStorage.removeItem('username');sessionStorage.setItem('username',result.data[0][\"MPS_USERNAME\"]);sessionStorage.removeItem('email');sessionStorage.setItem('email',result.data[0]['MPS_USEREMAIL']);window.location.href=\"./setting\";}else{setLoading(\"false\");swal(\"Ralat!\",\"Kemaskini tidak berjaya.\",\"error\");}});}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex flex-col min-w-0 break-words w-full h-full shadow-lg  bg-gray-300 border-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-t bg-white mb-0 px-6 py-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center flex justify-between\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"text-gray-800 text-xl font-bold\",children:\"Akaun myMPS\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-auto px-4 lg:px-10 py-10 pt-0\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-blue-500 text-sm mt-3 mb-6 font-bold uppercase\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-6/12 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block uppercase text-gray-700 text-xs font-bold mb-2\",htmlFor:\"grid-password\",children:\"Nama Penuh\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",id:\"username\"},username),{},{className:\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\",defaultValue:sessionStorage.getItem(\"username\")}))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-6/12 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block uppercase text-gray-700 text-xs font-bold mb-2\",htmlFor:\"grid-password\",children:\"Alamat Emel\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"email\",id:\"email\"},email),{},{className:\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\",defaultValue:sessionStorage.getItem(\"email\")}))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-6/12 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block uppercase text-gray-700 text-xs font-bold mb-2\",htmlFor:\"grid-password\",children:\"NOMBOR KAD PENGENALAN\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},nokp),{},{readOnly:true,className:\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-gray-200 rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\",defaultValue:sessionStorage.getItem(\"nokp\")}))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-6/12 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block uppercase text-gray-700 text-xs font-bold mb-2\",htmlFor:\"grid-password\",children:\"NOMBOR TELEFON\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"notel\",className:\"px-3 py-3 placeholder-gray-400 text-gray-700 rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\",defaultValue:notel})]})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-6 border-b-1 border-gray-400\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap mt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-12/12 px-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full mb-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleUpdate,class:\"bg-green-500 hover:bg-green-700 text-white py-2 px-3 rounded float-right\",children:\"Kemaskini\"})})})})]})})]})});}","map":{"version":3,"sources":["/Users/syahrilsulaiman/Desktop/mps_new_version_dev-1/src/components/Cards/CardSettings2.js"],"names":["React","useState","swal","useFormInput","initialValue","value","setValue","handleChange","e","target","onChange","CardSettings","notel","console","log","error","setError","loading","setLoading","username","sessionStorage","getItem","email","nokp","handleUpdate","document","getElementById","formdata","FormData","append","trim","requestOptions","method","body","redirect","urlAPI","fetch","then","response","json","result","status","removeItem","setItem","data","window","location","href"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport swal from \"sweetalert\";\n\n// components\n\nconst useFormInput = (initialValue) => {\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = (e) => {\n    setValue(e.target.value);\n  };\n  return {\n    value,\n    onChange: handleChange,\n  };\n};\n\nexport default function CardSettings({notel=\"\"}) {\n\n  console.log(notel);\n\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const username  = sessionStorage.getItem('username');\n  const email     = sessionStorage.getItem('email');\n  const nokp      = sessionStorage.getItem('nokp');\n\n  const handleUpdate = () => {\n\n    var username  = document.getElementById(\"username\").value;\n    var email     = document.getElementById(\"email\").value;\n    var notel     = document.getElementById(\"notel\").value;\n\n    if(username == \"\")\n    {\n      swal(\"Opss!\", \"Kata nama tidak boleh dikosongkan.\",\"error\");\n      return false;\n    }\n    else if(email == \"\")\n    {\n      swal(\"Opss!\", \"Emel tidak boleh dikosongkan\",\"error\");\n      return false;\n    }\n    else if(notel == \"\")\n    { \n      swal(\"Opss!\", \"Nombor telefon tidak boleh dikosongkan\",\"error\");\n      return false;\n    }\n    else\n    {\n\n      var formdata = new FormData();\n\n        formdata.append(\"username\", username.trim());\n        formdata.append(\"email\", email.trim());\n        formdata.append(\"nokp\", nokp);\n        formdata.append(\"notel\", notel.trim());\n\n        var requestOptions = {\n        method: 'POST',\n        body: formdata,\n        redirect: 'follow'\n        };\n\n        var urlAPI = \"https://mymps.corrad.my/int/api_generator.php?api_name=update_profile\";\n\n        fetch(urlAPI, requestOptions)\n        .then(response => response.json())\n        .then(result => {\n\n          if(result.status == \"success\"){\n\n            setLoading(\"false\");\n            swal(\"Berjaya!\",\"Akaun profil anda sudah dikemaskini.\",\"success\");\n\n            sessionStorage.removeItem('username');\n            sessionStorage.setItem('username', result.data[0][\"MPS_USERNAME\"]);\n\n            sessionStorage.removeItem('email');\n            sessionStorage.setItem('email', result.data[0]['MPS_USEREMAIL']);\n\n            window.location.href = \"./setting\";\n\n          }\n          else\n          {\n            setLoading(\"false\");\n            swal(\"Ralat!\",\"Kemaskini tidak berjaya.\",\"error\");\n          }\n\n        })\n    }\n  }\n\n  return (\n    <>\n      <div className=\"relative flex flex-col min-w-0 break-words w-full h-full shadow-lg  bg-gray-300 border-0\">\n        <div className=\"rounded-t bg-white mb-0 px-6 py-6\">\n          <div className=\"text-center flex justify-between\">\n            <h6 className=\"text-gray-800 text-xl font-bold\">Akaun myMPS</h6>\n          </div>\n        </div>\n        <div className=\"flex-auto px-4 lg:px-10 py-10 pt-0\">\n          <form>\n            <h6 className=\"text-blue-500 text-sm mt-3 mb-6 font-bold uppercase\">\n              \n            </h6>\n            <div className=\"flex flex-wrap\">\n\n              <div className=\"w-full lg:w-6/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    Nama Penuh \n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"username\"\n                    {...username}\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue={sessionStorage.getItem(\"username\")}\n                  />\n                </div>\n              </div>\n\n              <div className=\"w-full lg:w-6/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    Alamat Emel\n                  </label>\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    {...email}\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue={sessionStorage.getItem(\"email\")}\n                  />\n                </div>\n              </div>\n\n              <div className=\"w-full lg:w-6/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    NOMBOR KAD PENGENALAN\n                  </label>\n                  <input\n                    type=\"text\"\n                    {...nokp}\n                    readOnly\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-gray-200 rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue={sessionStorage.getItem(\"nokp\")}\n                  />\n                </div>\n              </div>\n\n              <div className=\"w-full lg:w-6/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    NOMBOR TELEFON\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"notel\"\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue={notel}\n                  />\n                </div>\n              </div>\n\n            </div>\n\n            <hr className=\"mt-6 border-b-1 border-gray-400\" />\n\n            <div className=\"flex flex-wrap mt-6\">\n              <div className=\"w-full lg:w-12/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <button type=\"button\" onClick={handleUpdate} class=\"bg-green-500 hover:bg-green-700 text-white py-2 px-3 rounded float-right\">\n                    Kemaskini\n                  </button>\n                </div>\n              </div>\n            </div>\n            \n          </form>\n        </div>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}