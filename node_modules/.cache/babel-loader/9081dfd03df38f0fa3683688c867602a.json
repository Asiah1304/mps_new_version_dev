{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from\"react\";import axios from\"axios\";import{setUserSession}from\"./Utils/Common\";import logo1 from\"./assets/img/logo1.png\";import{getGoogleToken,getGoogleEmail,getGoogleName}from\"./Utils/Common\";import IndexNavbar from\"./components/Navbars/IndexNavbar2.js\";import Footer from\"./components/Footers/Footer\";import swal from\"sweetalert\";function Register(props){var googleemail=getGoogleEmail();var googlename=getGoogleName();var username=getGoogleName();var password=useFormInput(\"\");var confpassword=useFormInput(\"\");var email=getGoogleEmail();var confemail=useFormInput(\"\");var nokp=useFormInput(\"\");var numbers=/^[0-9]+$/;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleRegister=function handleRegister(){setError(null);setLoading(true);if(username.value==\"\"){swal(\"Opss!\",\"Sila masukkan kata nama anda.\",\"error\");return false;}else if(nokp.value==\"\"){swal(\"Opss!\",\"Sila masukkan nombor kad pengenalan anda.\",\"error\");return false;}else if(nokp.value.length<12||nokp.value.length>12){swal(\"Opss!\",\"No kad pengenalan yang anda masuk tidak sah.\",\"error\");return false;}else if(!nokp.value.match(numbers)){swal(\"Opss!\",\"No kad pengenalan yang anda masuk tidak sah.\",\"error\");return false;}else if(email.value==\"\"){swal(\"Opss!\",\"Sila masukkan emel anda.\",\"error\");return false;}else if(email.value!==confemail.value){swal(\"Opss!\",\"Sila pastikan emel dan emel pengesahan sah.\",\"error\");return false;}else if(password.value==\"\"){swal(\"Opss!\",\"Sila masukkan kata laluan anda.\",\"error\");return false;}else if(password.value!==confpassword.value){swal(\"Opss!\",\"Sila pastikan kataluan dan sah kata laluan sama.\",\"error\");return false;}else if(password.value.length<6){swal(\"Opss!\",\"Kata laluan anda tidak selamat. Sila cuba lagi.\",\"error\");return false;}else{if(nokp.value.match(numbers)){var formdata=new FormData();formdata.append(\"username\",username.value);formdata.append(\"password\",password.value);formdata.append(\"email\",email.value);formdata.append(\"nokp\",nokp.value);var requestOptions={method:'POST',body:formdata,redirect:'follow'};var urlAPI=\"https://mymps.corrad.my/int/api_generator.php?api_name=daftar_pengguna\";fetch(urlAPI,requestOptions).then(function(response){return response.json();}).then(function(result){if(result.status==\"success\"){setLoading(\"false\");swal(\"Tahniah!\",\"Pendaftaran sebagai pengguna MyMPS berjaya!\",\"success\");setUserSession(btoa(formdata),username.value,nokp.value,email.value);props.history.push(\"/home\");}else{setLoading(\"false\");swal(\"Ralat!\",\"Pendaftaran pengguna tidak berjaya!\",\"error\");}});}}// axios\n//   .post(\"https://apisim.mps.gov.my/api/mymps/akaunbyic?nokp=930420145231\", {\n//     username: username.value,\n//     password: password.value,\n//   })\n//   .then((response) => {\n//     setLoading(false);\n//     setUserSession(response.data[0].NOAKAUN, response.data[0].NAMA_PEMILIK);\n//     console.log(response.data);\n//     props.history.push(\"/home\");\n//   })\n//   .catch((error) => {\n//     setLoading(false);\n//     console.log(\"Something went wrong. Plese try again!\");\n//     if (error.response.status === 401)\n//       setError(error.response.data.message);\n//     else setError(\"Something went wrong. Please try again later.\");\n//   });\n};var handleNumber=function handleNumber(){console.log(username.value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray\",children:[/*#__PURE__*/_jsx(IndexNavbar,{fixed:true}),/*#__PURE__*/_jsx(\"section\",{className:\"py-20 relative\",style:_defineProperty({background:\"rgb(34,81,122)\"},\"background\",\"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\"),children:/*#__PURE__*/_jsx(\"div\",{className:\" sm:mt-0\",style:{padding:\"20px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"md:grid md:grid-cols-3 md:gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-1 bg-gray-100\",style:{padding:\"20px\",borderRadius:\"10px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 sm:px-0\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"mx-auto\",src:logo1,style:{width:\"120px\",height:\"120px\"}}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium leading-6 text-gray-900 text-center\",style:{marginTop:\"30px\"},children:\"Pengesahan Pengguna\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm leading-5 text-gray-600\",style:{marginTop:\"30px\"},children:\"Selamat Datang ke laman pengesahan pengguna Majlis Perbandaran Selayang 2020. Sila pastikan setiap maklumat diisi lengkap untuk mengelakkan maklumat palsu.\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 md:mt-0 md:col-span-2\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"shadow overflow-hidden sm:rounded-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-5 bg-white sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-6 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6 sm:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"first_name\",className:\"block text-sm font-medium leading-5 text-gray-700\",children:\"KATA PENGGUNA\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},username),{},{value:sessionStorage.getItem('GoogleName'),id:\"name\",placeholder:\"cth: adrian\",className:\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6 sm:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"last_name\",className:\"block text-sm font-medium leading-5 text-gray-700\",children:\"NO KAD PENGENALAN\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},nokp),{},{id:\"nokp\",placeholder:\"cth: 923456061278\",className:\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6 sm:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"email_address\",className:\"block text-sm font-medium leading-5 text-gray-700\",children:\"ALAMAT EMEL\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},email),{},{value:sessionStorage.getItem('GoogleEmail'),id:\"email_address\",placeholder:\"cth: malik@email.com\",className:\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6 sm:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"email_address\",className:\"block text-sm font-medium leading-5 text-gray-700\",children:\"SAH ALAMAT EMEL\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},confemail),{},{id:\"conf_email_address\",placeholder:\"cth: malik@email.com\",className:\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6 sm:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"street_address\",className:\"block text-sm font-medium leading-5 text-gray-700\",children:\"KATA LALUAN\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},password),{},{id:\"password\",placeholder:\"cth: 12345678\",className:\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6 sm:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"street_address\",className:\"block text-sm font-medium leading-5 text-gray-700\",children:\"SAH KATA LALUAN\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},confpassword),{},{id:\"conf_password\",placeholder:\"cth: 12345678\",className:\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\"}))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 bg-gray-50 text-right sm:px-6 bg-gray-300\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleRegister,type:\"button\",className:\"py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-green-600 shadow-sm hover:bg-green-500 focus:outline-none focus:shadow-outline-blue active:bg-indigo-600 transition duration-150 ease-in-out\",children:\"Daftar\"})})]})})})]})})}),/*#__PURE__*/_jsx(Footer,{})]});}var useFormInput=function useFormInput(initialValue){var _useState5=useState(initialValue),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];var handleChange=function handleChange(e){setValue(e.target.value);};return{value:value,onChange:handleChange};};export default Register;","map":{"version":3,"sources":["C:/Users/Admin/mps_new_version_dev/src/GoogleLogin.js"],"names":["React","useState","axios","setUserSession","logo1","getGoogleToken","getGoogleEmail","getGoogleName","IndexNavbar","Footer","swal","Register","props","googleemail","googlename","username","password","useFormInput","confpassword","email","confemail","nokp","numbers","error","setError","loading","setLoading","handleRegister","value","length","match","formdata","FormData","append","requestOptions","method","body","redirect","urlAPI","fetch","then","response","json","result","status","btoa","history","push","handleNumber","console","log","background","padding","borderRadius","width","height","marginTop","sessionStorage","getItem","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { setUserSession } from \"./Utils/Common\";\r\nimport logo1 from \"./assets/img/logo1.png\";\r\n\r\nimport { getGoogleToken, getGoogleEmail, getGoogleName} from \"./Utils/Common\";\r\n\r\nimport IndexNavbar from \"./components/Navbars/IndexNavbar2.js\";\r\nimport Footer from \"./components/Footers/Footer\";\r\nimport swal from \"sweetalert\";\r\n\r\nfunction Register(props) {\r\n\r\n  const googleemail = getGoogleEmail();\r\n  const googlename = getGoogleName();\r\n\r\n  const username = getGoogleName();\r\n  const password = useFormInput(\"\");\r\n  const confpassword = useFormInput(\"\");\r\n  const email = getGoogleEmail();\r\n  const confemail = useFormInput(\"\");\r\n  const nokp = useFormInput(\"\");\r\n  var numbers = /^[0-9]+$/;\r\n\r\n  const [error, setError]     = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleRegister = () => {\r\n    \r\n    setError(null);\r\n    setLoading(true);\r\n\r\n    if(username.value == \"\")\r\n    {\r\n      swal(\"Opss!\", \"Sila masukkan kata nama anda.\",\"error\");\r\n      return false;\r\n    }\r\n    else if(nokp.value == \"\")\r\n    {\r\n      swal(\"Opss!\", \"Sila masukkan nombor kad pengenalan anda.\",\"error\");\r\n      return false;\r\n    }\r\n    else if(nokp.value.length < 12 || nokp.value.length > 12){\r\n      swal(\"Opss!\", \"No kad pengenalan yang anda masuk tidak sah.\",\"error\");\r\n      return false;\r\n    }\r\n    else if(!nokp.value.match(numbers)){\r\n      swal(\"Opss!\", \"No kad pengenalan yang anda masuk tidak sah.\",\"error\");\r\n      return false;\r\n    }\r\n    else if(email.value == \"\")\r\n    {\r\n      swal(\"Opss!\", \"Sila masukkan emel anda.\", \"error\");\r\n      return false;\r\n    }\r\n    else if(email.value !== confemail.value){\r\n      swal(\"Opss!\", \"Sila pastikan emel dan emel pengesahan sah.\", \"error\");\r\n      return false;\r\n    }\r\n    else if(password.value == \"\")\r\n    {\r\n      swal(\"Opss!\", \"Sila masukkan kata laluan anda.\", \"error\");\r\n      return false;\r\n    }\r\n    else if(password.value !== confpassword.value)\r\n    {\r\n      swal(\"Opss!\", \"Sila pastikan kataluan dan sah kata laluan sama.\", \"error\");\r\n      return false;\r\n    }\r\n    else if(password.value.length < 6)\r\n    { \r\n      swal(\"Opss!\", \"Kata laluan anda tidak selamat. Sila cuba lagi.\", \"error\");\r\n      return false;\r\n    }\r\n    else{\r\n      \r\n      if(nokp.value.match(numbers)){\r\n        \r\n        var formdata = new FormData();\r\n        formdata.append(\"username\", username.value);\r\n        formdata.append(\"password\", password.value);\r\n        formdata.append(\"email\", email.value);\r\n        formdata.append(\"nokp\", nokp.value);\r\n\r\n        var requestOptions = {\r\n        method: 'POST',\r\n        body: formdata,\r\n        redirect: 'follow'\r\n        };\r\n\r\n        var urlAPI = \"https://mymps.corrad.my/int/api_generator.php?api_name=daftar_pengguna\";\r\n\r\n        fetch(urlAPI, requestOptions)\r\n        .then(response => response.json())\r\n        .then(result => {\r\n\r\n          if(result.status == \"success\"){\r\n\r\n            setLoading(\"false\");\r\n            swal(\"Tahniah!\",\"Pendaftaran sebagai pengguna MyMPS berjaya!\",\"success\");\r\n\r\n            setUserSession(btoa(formdata), username.value, nokp.value, email.value);\r\n            props.history.push(\"/home\");\r\n\r\n          }else{\r\n            setLoading(\"false\");\r\n            swal(\"Ralat!\",\"Pendaftaran pengguna tidak berjaya!\",\"error\");\r\n            \r\n          }\r\n\r\n        })\r\n\r\n      }\r\n    }\r\n\r\n    // axios\r\n    //   .post(\"https://apisim.mps.gov.my/api/mymps/akaunbyic?nokp=930420145231\", {\r\n    //     username: username.value,\r\n    //     password: password.value,\r\n    //   })\r\n    //   .then((response) => {\r\n    //     setLoading(false);\r\n    //     setUserSession(response.data[0].NOAKAUN, response.data[0].NAMA_PEMILIK);\r\n\r\n    //     console.log(response.data);\r\n    //     props.history.push(\"/home\");\r\n    //   })\r\n    //   .catch((error) => {\r\n    //     setLoading(false);\r\n\r\n    //     console.log(\"Something went wrong. Plese try again!\");\r\n    //     if (error.response.status === 401)\r\n    //       setError(error.response.data.message);\r\n    //     else setError(\"Something went wrong. Please try again later.\");\r\n    //   });\r\n  };\r\n\r\n  const handleNumber = () => {\r\n    console.log(username.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray\">\r\n      <IndexNavbar fixed />\r\n\r\n      \r\n      <section className=\"py-20 relative\" style={{background: \"rgb(34,81,122)\", background: \"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\"}}>\r\n\r\n      {/* sample form */}\r\n      <div className=\" sm:mt-0\" style={{padding: \"20px\"}}>\r\n        <div className=\"md:grid md:grid-cols-3 md:gap-6\">\r\n          <div className=\"md:col-span-1 bg-gray-100\" style={{padding: \"20px\", borderRadius: \"10px\"}}>\r\n            <div className=\"px-4 sm:px-0\">\r\n              <img className=\"mx-auto\" src={logo1} style={{width:\"120px\", height:\"120px\"}}/>\r\n              <h3 className=\"text-lg font-medium leading-6 text-gray-900 text-center\" style={{marginTop: \"30px\"}}>Pengesahan Pengguna</h3>\r\n              <p className=\"mt-1 text-sm leading-5 text-gray-600\" style={{marginTop: \"30px\"}}>\r\n                Selamat Datang ke laman pengesahan pengguna Majlis Perbandaran Selayang 2020. Sila pastikan setiap maklumat diisi lengkap untuk mengelakkan maklumat palsu.\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-5 md:mt-0 md:col-span-2\">\r\n            <form>\r\n              <div className=\"shadow overflow-hidden sm:rounded-md\">\r\n                <div className=\"px-4 py-5 bg-white sm:p-6\">\r\n                  <div className=\"grid grid-cols-6 gap-6\">\r\n\r\n                    <div className=\"col-span-6 sm:col-span-3\">\r\n                      <label for=\"first_name\" className=\"block text-sm font-medium leading-5 text-gray-700\">KATA PENGGUNA</label>\r\n                      <input {...username} value={sessionStorage.getItem('GoogleName')} id=\"name\" placeholder=\"cth: adrian\" className=\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\" />\r\n                    </div>\r\n\r\n                    <div className=\"col-span-6 sm:col-span-3\">\r\n                      <label for=\"last_name\" className=\"block text-sm font-medium leading-5 text-gray-700\">NO KAD PENGENALAN</label>\r\n                      <input {...nokp} id=\"nokp\" placeholder=\"cth: 923456061278\" className=\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\" />\r\n                    </div>\r\n\r\n                    <div className=\"col-span-6 sm:col-span-3\">\r\n                      <label for=\"email_address\" className=\"block text-sm font-medium leading-5 text-gray-700\">ALAMAT EMEL</label>\r\n                      <input {...email} value={sessionStorage.getItem('GoogleEmail')} id=\"email_address\" placeholder=\"cth: malik@email.com\" className=\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\" />\r\n                    </div>\r\n\r\n                    <div className=\"col-span-6 sm:col-span-3\">\r\n                      <label for=\"email_address\" className=\"block text-sm font-medium leading-5 text-gray-700\">SAH ALAMAT EMEL</label>\r\n                      <input {...confemail} id=\"conf_email_address\" placeholder=\"cth: malik@email.com\" className=\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\" />\r\n                    </div>\r\n\r\n                    <div className=\"col-span-6 sm:col-span-3\">\r\n                      <label for=\"street_address\" className=\"block text-sm font-medium leading-5 text-gray-700\">KATA LALUAN</label>\r\n                      <input {...password} id=\"password\" placeholder=\"cth: 12345678\" className=\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\" />\r\n                    </div>\r\n\r\n                    <div className=\"col-span-6 sm:col-span-3\">\r\n                      <label for=\"street_address\" className=\"block text-sm font-medium leading-5 text-gray-700\">SAH KATA LALUAN</label>\r\n                      <input {...confpassword} id=\"conf_password\" placeholder=\"cth: 12345678\" className=\"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5\" />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6 bg-gray-300\">\r\n                  <button onClick={handleRegister} type=\"button\" className=\"py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-green-600 shadow-sm hover:bg-green-500 focus:outline-none focus:shadow-outline-blue active:bg-indigo-600 transition duration-150 ease-in-out\">\r\n                    Daftar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* sample form */}\r\n      </section>\r\n\r\n      {/* <section className=\"pb-16 bg-gray-300 relative pt-32\">\r\n        \r\n      </section> */}\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useFormInput = (initialValue) => {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  const handleChange = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n  return {\r\n    value,\r\n    onChange: handleChange,\r\n  };\r\n};\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}