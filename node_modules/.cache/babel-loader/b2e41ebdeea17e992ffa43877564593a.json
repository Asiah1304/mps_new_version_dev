{"ast":null,"code":"import _slicedToArray from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState}from\"react\";import{Pane,Button,Heading,TextInputField,Text}from\"evergreen-ui\";import swal from\"sweetalert\";// components\nvar useFormInput=function useFormInput(initialValue){var _useState=useState(initialValue),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var handleChange=function handleChange(e){setValue(e.target.value);};return{value:value,onChange:handleChange};};export default function CardSettings(_ref){var _ref$nama=_ref.nama,nama=_ref$nama===void 0?\"\":_ref$nama,_ref$nokp=_ref.nokp,nokp=_ref$nokp===void 0?\"\":_ref$nokp,_ref$email=_ref.email,email=_ref$email===void 0?\"\":_ref$email,_ref$notel=_ref.notel,notel=_ref$notel===void 0?\"\":_ref$notel,_ref$color=_ref.color,color=_ref$color===void 0?\"blue\":_ref$color;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(nama),_useState8=_slicedToArray(_useState7,2),namapenuh=_useState8[0],setUsername=_useState8[1];var _useState9=useState(nokp),_useState10=_slicedToArray(_useState9,2),kadpengenalan=_useState10[0],setIC=_useState10[1];var _useState11=useState(email),_useState12=_slicedToArray(_useState11,2),emel=_useState12[0],setEmail=_useState12[1];var _useState13=useState(notel),_useState14=_slicedToArray(_useState13,2),telefon=_useState14[0],setTelephone=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),password=_useState16[0],setPassword=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),new_password=_useState18[0],setNewPassword=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),conf_password=_useState20[0],setConformPassword=_useState20[1];var _useState21=useState(1),_useState22=_slicedToArray(_useState21,2),openTab=_useState22[0],setOpenTab=_useState22[1];var handleUpdate=function handleUpdate(){if(namapenuh==\"\"){swal(\"Opss!\",\"Kata nama tidak boleh dikosongkan.\",\"error\");return false;}else if(emel==\"\"){swal(\"Opss!\",\"Emel tidak boleh dikosongkan\",\"error\");return false;}else if(telefon==\"\"){swal(\"Opss!\",\"Nombor telefon tidak boleh dikosongkan\",\"error\");return false;}else{var formdata=new FormData();formdata.append(\"username\",namapenuh.trim());formdata.append(\"email\",emel.trim());formdata.append(\"nokp\",kadpengenalan);formdata.append(\"notel\",telefon.trim());var requestOptions={method:'POST',body:formdata,redirect:'follow'};var urlAPI=\"https://mymps.corrad.my/int/api_generator.php?api_name=update_profile\";fetch(urlAPI,requestOptions).then(function(response){return response.json();}).then(function(result){if(result.status==\"success\"){setLoading(\"false\");sessionStorage.removeItem('username');sessionStorage.setItem('username',result.data[0][\"U_USERNAME\"]);sessionStorage.removeItem('email');sessionStorage.setItem('email',result.data[0]['U_USEREMAIL']);swal(\"Berjaya\",\"Akaun profil anda sudah dikemaskini.\",\"success\").then(function(){window.location.href=\"/setting\";});}else{setLoading(\"false\");swal(\"Ralat!\",\"Kemaskini tidak berjaya.\",\"error\");}});}};var handleChangePassword=function handleChangePassword(){if(password==\"\"){swal(\"Opss\",\"Sila isi kata laluan terkini.\",\"error\");}else if(new_password==\"\"){swal(\"Opss\",\"Sila isi kata laluan yang baru.\",\"error\");}else if(conf_password==\"\"){swal(\"Opss\",\"Sila isi pengesahan kata laluan yang baru.\",\"error\");}else if(new_password!==conf_password){swal(\"Opss\",\"Kata laluan anda tidak sah\",\"error\");}else{console.log(password);console.log(new_password);console.log(conf_password);swal(\"Anda pasti untuk set semula kata laluan anda?\",{buttons:{cancel:\"Tidak\",teruskan:{text:\"Teruskan\",value:\"pasti\"}}}).then(function(value){switch(value){case\"pasti\":var formdata=new FormData();formdata.append(\"old_password\",password);formdata.append(\"new_password\",new_password);formdata.append(\"conf_password\",conf_password);formdata.append(\"userid\",sessionStorage.getItem(\"nokp\"));var requestOptions={method:'POST',body:formdata,redirect:'follow'};fetch(\"https://mymps.corrad.my/int/api_generator.php?api_name=update_password\",requestOptions).then(function(response){return response.json();}).then(function(result){console.log(result);if(result.status==\"pending\"){swal(\"Maaf\",\"Anda perlu tunggu 10 minit sebelum membuat penukaran kata laluan semula.\",\"error\").then(function(){window.location.href=\"/setting\";});}else if(result.status==\"success\"){swal(\"Berjaya\",\"Kata laluan akaun telah berjaya ditukar\",\"success\").then(function(){window.location.href=\"/setting\";});}else{swal(\"Maaf\",\"Kata laluan akaun tidak berjaya ditukar\",\"error\").then(function(){window.location.href=\"/setting\";});}}).catch(function(error){return console.log('error',error);});break;case\"cancel\":break;default:}});}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"flex mb-0 list-none flex-wrap pt-3 pb-4 flex-row justify-center\",role:\"tablist\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"-mb-px mr-2 last:mr-0 flex-auto text-center\",children:/*#__PURE__*/_jsx(\"a\",{className:\"text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal \"+(openTab===1?\"text-white bg-\"+color+\"-600\":\"text-\"+color+\"-600 bg-white\"),onClick:function onClick(e){e.preventDefault();setOpenTab(1);},\"data-toggle\":\"tab\",href:\"#link1\",role:\"tablist\",children:\"Profil\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"-mb-px mr-2 last:mr-0 flex-auto text-center\",children:/*#__PURE__*/_jsx(\"a\",{className:\"text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal \"+(openTab===2?\"text-white bg-\"+color+\"-600\":\"text-\"+color+\"-600 bg-white\"),onClick:function onClick(e){e.preventDefault();setOpenTab(2);},\"data-toggle\":\"tab\",href:\"#link2\",role:\"tablist\",children:\"Kata Laluan\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-5 flex-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content tab-space\",children:[/*#__PURE__*/_jsx(\"div\",{className:openTab===1?\"block\":\"hidden\",id:\"link1\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Pane,{display:\"flex\",padding:10,background:\"#dfe6e9\",borderRadius:5,children:/*#__PURE__*/_jsx(Pane,{flex:1,alignItems:\"center\",display:\"flex\",children:/*#__PURE__*/_jsx(Text,{size:600,children:\"Profil Akaun mymps\"})})}),/*#__PURE__*/_jsx(Pane,{display:\"flex\",padding:3,background:\"tint3\",borderRadius:3,marginTop:\"30px\",children:/*#__PURE__*/_jsxs(Pane,{flex:1,alignItems:\"center\",children:[/*#__PURE__*/_jsx(TextInputField,{label:\"NAMA PENUH\",width:\"100%\",placeholder:\"Sila isi nama penuh anda\",required:true,defaultValue:namapenuh,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(TextInputField,{label:\"NOMBOR KAD PENGENALAN\",width:\"100%\",placeholder:\"Sila isi nombor kad pengenalan anda\",required:true,disabled:true,defaultValue:kadpengenalan}),/*#__PURE__*/_jsx(TextInputField,{label:\"ALAMAT EMEL\",width:\"100%\",placeholder:\"Sila isi alamat emel anda\",required:true,defaultValue:emel,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(TextInputField,{label:\"NOMBOR TELEFON\",width:\"100%\",placeholder:\"Sila isi nombor telefon anda\",required:true,defaultValue:telefon,onChange:function onChange(e){return setTelephone(e.target.value);}})]})}),/*#__PURE__*/_jsx(Pane,{children:/*#__PURE__*/_jsx(Button,{className:\"float-right\",appearance:\"primary\",intent:\"success\",type:\"button\",onClick:handleUpdate,children:\"Kemaskini\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:openTab===2?\"block\":\"hidden\",id:\"link2\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Pane,{display:\"flex\",padding:10,background:\"#dfe6e9\",borderRadius:5,children:/*#__PURE__*/_jsx(Pane,{flex:1,alignItems:\"center\",display:\"flex\",children:/*#__PURE__*/_jsx(Text,{size:600,children:\"Set Kata Laluan\"})})}),/*#__PURE__*/_jsxs(Pane,{padding:3,background:\"tint3\",borderRadius:3,marginTop:\"30px\",children:[/*#__PURE__*/_jsx(TextInputField,{label:\"KATA LALUAN TERKINI\",width:\"100%\",placeholder:\"Sila isi kata laluan terkini\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(TextInputField,{label:\"KATA LALUAN BARU\",width:\"100%\",placeholder:\"Sila isi kata laluan baru\",required:true,onChange:function onChange(e){return setNewPassword(e.target.value);}}),/*#__PURE__*/_jsx(TextInputField,{label:\"SAH KATA LALUAN BARU\",width:\"100%\",placeholder:\"Sila sahkan kata laluan baru\",required:true,onChange:function onChange(e){return setConformPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Pane,{children:/*#__PURE__*/_jsx(Button,{className:\"float-right\",appearance:\"primary\",intent:\"success\",type:\"button\",onClick:handleChangePassword,children:\"Kemaskini\"})})]})})]})})})]})});}","map":{"version":3,"sources":["C:/Users/Admin/mps_new_version_dev/src/components/Cards/CardSettings.js"],"names":["React","useState","Pane","Button","Heading","TextInputField","Text","swal","useFormInput","initialValue","value","setValue","handleChange","e","target","onChange","CardSettings","nama","nokp","email","notel","color","error","setError","loading","setLoading","namapenuh","setUsername","kadpengenalan","setIC","emel","setEmail","telefon","setTelephone","password","setPassword","new_password","setNewPassword","conf_password","setConformPassword","openTab","setOpenTab","handleUpdate","formdata","FormData","append","trim","requestOptions","method","body","redirect","urlAPI","fetch","then","response","json","result","status","sessionStorage","removeItem","setItem","data","window","location","href","handleChangePassword","console","log","buttons","cancel","teruskan","text","getItem","catch","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Pane, Button, Heading, TextInputField, Text } from \"evergreen-ui\";\r\nimport swal from \"sweetalert\";\r\n\r\n// components\r\n\r\nconst useFormInput = (initialValue) => {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  const handleChange = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n  return {\r\n    value,\r\n    onChange: handleChange,\r\n  };\r\n};\r\n\r\nexport default function CardSettings({ \r\n  nama = \"\",\r\n  nokp = \"\",\r\n  email = \"\",\r\n  notel = \"\",\r\n  color = \"blue\",\r\n}) {\r\n\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [namapenuh, setUsername] = useState(nama);\r\n  const [kadpengenalan, setIC] = useState(nokp);\r\n  const [emel, setEmail] = useState(email);\r\n  const [telefon, setTelephone] = useState(notel);           \r\n  const [password, setPassword] = useState(\"\");\r\n  const [new_password, setNewPassword] = useState(\"\");\r\n  const [conf_password, setConformPassword] = useState(\"\");\r\n  const [openTab, setOpenTab] = useState(1);\r\n\r\n  const handleUpdate = () => {\r\n\r\n    if (namapenuh == \"\") {\r\n      swal(\"Opss!\", \"Kata nama tidak boleh dikosongkan.\", \"error\");\r\n      return false;\r\n    }\r\n    else if (emel == \"\") {\r\n      swal(\"Opss!\", \"Emel tidak boleh dikosongkan\", \"error\");\r\n      return false;\r\n    }\r\n    else if (telefon == \"\") {\r\n      swal(\"Opss!\", \"Nombor telefon tidak boleh dikosongkan\", \"error\");\r\n      return false;\r\n    }\r\n    else {\r\n\r\n      var formdata = new FormData();\r\n\r\n      formdata.append(\"username\", namapenuh.trim());\r\n      formdata.append(\"email\", emel.trim());\r\n      formdata.append(\"nokp\", kadpengenalan);\r\n      formdata.append(\"notel\", telefon.trim());\r\n\r\n      var requestOptions = {\r\n        method: 'POST',\r\n        body: formdata,\r\n        redirect: 'follow'\r\n      };\r\n\r\n      var urlAPI = \"https://mymps.corrad.my/int/api_generator.php?api_name=update_profile\";\r\n\r\n      fetch(urlAPI, requestOptions)\r\n        .then(response => response.json())\r\n        .then(result => {\r\n\r\n          if (result.status == \"success\") {\r\n\r\n            setLoading(\"false\");\r\n\r\n            sessionStorage.removeItem('username');\r\n            sessionStorage.setItem('username', result.data[0][\"U_USERNAME\"]);\r\n\r\n            sessionStorage.removeItem('email');\r\n            sessionStorage.setItem('email', result.data[0]['U_USEREMAIL']);\r\n\r\n            swal(\"Berjaya\",\"Akaun profil anda sudah dikemaskini.\",\"success\")\r\n            .then(() => {\r\n              window.location.href = \"/setting\";\r\n            });\r\n\r\n\r\n          }\r\n          else {\r\n            setLoading(\"false\");\r\n            swal(\"Ralat!\", \"Kemaskini tidak berjaya.\", \"error\");\r\n          }\r\n\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleChangePassword = () => {\r\n\r\n    if (password == \"\") {\r\n      swal(\"Opss\", \"Sila isi kata laluan terkini.\", \"error\");\r\n    } else if (new_password == \"\") {\r\n      swal(\"Opss\", \"Sila isi kata laluan yang baru.\", \"error\")\r\n    } else if (conf_password == \"\") {\r\n      swal(\"Opss\", \"Sila isi pengesahan kata laluan yang baru.\", \"error\")\r\n    } else if (new_password !== conf_password) {\r\n      swal(\"Opss\", \"Kata laluan anda tidak sah\", \"error\")\r\n    } else {\r\n\r\n      console.log(password);\r\n      console.log(new_password);\r\n      console.log(conf_password);\r\n      \r\n      swal(\"Anda pasti untuk set semula kata laluan anda?\", {\r\n        buttons: {\r\n          cancel: \"Tidak\",\r\n          teruskan: {\r\n            text:\"Teruskan\",\r\n            value:\"pasti\",\r\n          }\r\n        }\r\n      })\r\n      .then((value) => {\r\n        switch(value) {\r\n          case \"pasti\":\r\n\r\n            var formdata = new FormData();\r\n            formdata.append(\"old_password\", password);\r\n            formdata.append(\"new_password\", new_password);\r\n            formdata.append(\"conf_password\", conf_password);\r\n            formdata.append(\"userid\", sessionStorage.getItem(\"nokp\"));\r\n\r\n            var requestOptions = {\r\n              method: 'POST',\r\n              body: formdata,\r\n              redirect: 'follow'\r\n            };\r\n\r\n            fetch(\"https://mymps.corrad.my/int/api_generator.php?api_name=update_password\", requestOptions)\r\n              .then(response => response.json())\r\n              .then(result => {\r\n                console.log(result);\r\n                if(result.status == \"pending\"){\r\n                  swal(\"Maaf\",\"Anda perlu tunggu 10 minit sebelum membuat penukaran kata laluan semula.\",\"error\")\r\n                  .then(() => {\r\n                    window.location.href = \"/setting\";\r\n                  });\r\n                }\r\n                else if(result.status == \"success\"){\r\n                  swal(\"Berjaya\",\"Kata laluan akaun telah berjaya ditukar\",\"success\")\r\n                  .then(() => {\r\n                    window.location.href = \"/setting\";\r\n                  });\r\n                }else{\r\n                  swal(\"Maaf\",\"Kata laluan akaun tidak berjaya ditukar\",\"error\")\r\n                  .then(() => {\r\n                    window.location.href = \"/setting\";\r\n                  });\r\n                }\r\n              }\r\n              )\r\n              .catch(error => \r\n                console.log('error', error)\r\n              );\r\n\r\n            \r\n            break;\r\n          \r\n          case \"cancel\":\r\n            break;\r\n\r\n          default:\r\n        }\r\n        \r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n\r\n      <div className=\"w-full\">\r\n        <ul className=\"flex mb-0 list-none flex-wrap pt-3 pb-4 flex-row justify-center\" role=\"tablist\">\r\n          <li className=\"-mb-px mr-2 last:mr-0 flex-auto text-center\">\r\n            <a\r\n              className={\r\n                \"text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal \" +\r\n                (openTab === 1\r\n                  ? \"text-white bg-\" + color + \"-600\"\r\n                  : \"text-\" + color + \"-600 bg-white\")\r\n              }\r\n              onClick={e => {\r\n                e.preventDefault();\r\n                setOpenTab(1);\r\n              }}\r\n              data-toggle=\"tab\"\r\n              href=\"#link1\"\r\n              role=\"tablist\"\r\n            >\r\n              Profil\r\n              </a>\r\n          </li>\r\n          <li className=\"-mb-px mr-2 last:mr-0 flex-auto text-center\">\r\n            <a\r\n              className={\r\n                \"text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal \" +\r\n                (openTab === 2\r\n                  ? \"text-white bg-\" + color + \"-600\"\r\n                  : \"text-\" + color + \"-600 bg-white\")\r\n              }\r\n              onClick={e => {\r\n                e.preventDefault();\r\n                setOpenTab(2);\r\n              }}\r\n              data-toggle=\"tab\"\r\n              href=\"#link2\"\r\n              role=\"tablist\"\r\n            >\r\n              Kata Laluan\r\n              </a>\r\n          </li>\r\n        </ul>\r\n\r\n        <div className=\"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded\">\r\n            <div className=\"px-4 py-5 flex-auto\">\r\n              <div className=\"tab-content tab-space\">\r\n                <div className={openTab === 1 ? \"block\" : \"hidden\"} id=\"link1\">\r\n                  <p>\r\n                  <Pane display=\"flex\" padding={10} background=\"#dfe6e9\" borderRadius={5}>\r\n                    <Pane flex={1} alignItems=\"center\" display=\"flex\">\r\n                      <Text size={600}>Profil Akaun mymps</Text>\r\n                    </Pane>\r\n                  </Pane>\r\n\r\n                  <Pane display=\"flex\" padding={3} background=\"tint3\" borderRadius={3} marginTop=\"30px\">\r\n                    <Pane flex={1} alignItems=\"center\">\r\n                      <TextInputField\r\n                        label=\"NAMA PENUH\"\r\n                        width=\"100%\"\r\n                        placeholder=\"Sila isi nama penuh anda\"\r\n                        required={true}\r\n                        defaultValue={namapenuh}\r\n                        onChange={(e) => setUsername(e.target.value)}\r\n                      />\r\n\r\n                      <TextInputField\r\n                        label=\"NOMBOR KAD PENGENALAN\"\r\n                        width=\"100%\"\r\n                        placeholder=\"Sila isi nombor kad pengenalan anda\"\r\n                        required={true}\r\n                        disabled\r\n                        defaultValue={kadpengenalan}\r\n                      />\r\n\r\n                      <TextInputField\r\n                        label=\"ALAMAT EMEL\"\r\n                        width=\"100%\"\r\n                        placeholder=\"Sila isi alamat emel anda\"\r\n                        required={true}\r\n                        defaultValue={emel}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                      />\r\n\r\n                      <TextInputField\r\n                        label=\"NOMBOR TELEFON\"\r\n                        width=\"100%\"\r\n                        placeholder=\"Sila isi nombor telefon anda\"\r\n                        required={true}\r\n                        defaultValue={telefon}\r\n                        onChange={(e) => setTelephone(e.target.value)}\r\n                      />\r\n                    </Pane>\r\n                  </Pane>\r\n                  <Pane>\r\n                    <Button\r\n                      className=\"float-right\"\r\n                      appearance=\"primary\"\r\n                      intent=\"success\"\r\n                      type=\"button\"\r\n                      onClick={handleUpdate}\r\n                    >\r\n                      Kemaskini\r\n                    </Button>\r\n                  </Pane>\r\n                  </p>\r\n                </div>\r\n                <div className={openTab === 2 ? \"block\" : \"hidden\"} id=\"link2\">\r\n                  <p>\r\n                  <Pane display=\"flex\" padding={10} background=\"#dfe6e9\" borderRadius={5}>\r\n                    <Pane flex={1} alignItems=\"center\" display=\"flex\">\r\n                      <Text size={600}>Set Kata Laluan</Text>\r\n                    </Pane>\r\n                  </Pane>\r\n\r\n                  <Pane padding={3} background=\"tint3\" borderRadius={3} marginTop=\"30px\">\r\n                      <TextInputField\r\n                        label=\"KATA LALUAN TERKINI\"\r\n                        width=\"100%\"\r\n                        placeholder=\"Sila isi kata laluan terkini\"\r\n                        required={true}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                      />\r\n\r\n                      <TextInputField\r\n                        label=\"KATA LALUAN BARU\"\r\n                        width=\"100%\"\r\n                        placeholder=\"Sila isi kata laluan baru\"\r\n                        required={true}\r\n                        onChange={(e) => setNewPassword(e.target.value)}\r\n                      />\r\n\r\n                      <TextInputField\r\n                        label=\"SAH KATA LALUAN BARU\"\r\n                        width=\"100%\"\r\n                        placeholder=\"Sila sahkan kata laluan baru\"\r\n                        required={true}\r\n                        onChange={(e) => setConformPassword(e.target.value)}\r\n                      />\r\n                    </Pane>\r\n\r\n                    <Pane>\r\n                      <Button\r\n                        className=\"float-right\"\r\n                        appearance=\"primary\"\r\n                        intent=\"success\"\r\n                        type=\"button\"\r\n                        onClick={handleChangePassword}\r\n                      >\r\n                        Kemaskini\r\n                      </Button>\r\n                    </Pane>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n      </div>\r\n\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}