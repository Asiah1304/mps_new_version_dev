{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/syahrilsulaiman/mps_new_version/src/Login.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport react, { useState } from \"react\";\nimport { setUserSession } from './Utils/Common';\nimport { TextInputField, Heading, Button, BuildIcon } from \"evergreen-ui\";\nimport logo1 from \"./assets/img/logo1.png\";\nimport GoogleLogin from 'react-google-login';\nimport { setGoogleToken } from './Utils/Common';\nimport IndexNavbar from \"./components/Navbars/IndexNavbar2.js\";\nimport Footer from \"./components/Footers/Footer\";\nimport ggl from \"./assets/img/google-icon.svg\";\nimport swal from \"sweetalert\";\n\nfunction Login(props) {\n  _s();\n\n  sessionStorage.removeItem('GoogleToken');\n  sessionStorage.removeItem('GoogleEmail');\n  sessionStorage.removeItem('GoogleName');\n\n  const responseGoogle = response => {\n    console.log(response);\n    var email = response.profileObj.email;\n    var googleToken = response.tokenId;\n    var googlename = response.profileObj.givenName;\n    setGoogleToken(googleToken, email, googlename);\n    var formdata = new FormData();\n    formdata.append(\"email\", email);\n    var requestOptions = {\n      method: 'POST',\n      body: formdata,\n      redirect: 'follow'\n    };\n    var urlAPI1 = 'https://mymps.corrad.my/int/api_generator.php?api_name=check_user';\n    fetch(urlAPI1, requestOptions).then(response => response.json()).then(result => {\n      setLoading(false);\n\n      if (result.status == \"success\") {\n        setUserSession(btoa(result.data[0]), result.data[0][\"MPS_USERNAME\"], result.data[0][\"MPS_USERIC\"], result.data[0][\"MPS_USEREMAIL\"], result.data[0][\"MPS_USERROLE\"]);\n        props.history.push('/home');\n      } else if (result.status == \"unsuccess\") {\n        props.history.push(\"./verifyuser\");\n      }\n    }).catch(error => {\n      console.log(error);\n      swal(\"Opss!\", \"Something went wrong. Please contact your administrator!\", \"error\").then(value => {//props.history.push('/');\n      });\n    });\n  };\n\n  const username = useFormInput(\"\");\n  const password = useFormInput(\"\");\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleLogin = () => {\n    setError(null);\n    setLoading(true);\n\n    if (username.value == \"\" || password.value == \"\") {\n      swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\n      setLoading(false);\n    } else {\n      var sha256 = require('js-sha256');\n\n      var formdata = new FormData();\n      formdata.append(\"email\", username.value);\n      formdata.append(\"password\", sha256(password.value));\n      var requestOptions = {\n        method: 'POST',\n        body: formdata,\n        redirect: 'follow'\n      };\n      var urlAPI1 = 'https://mymps.corrad.my/int/api_generator.php?api_name=api_login';\n      fetch(urlAPI1, requestOptions).then(response => response.json()).then(result => {\n        setLoading(false);\n\n        if (result.status == \"unsuccess\") {\n          console.log(\"Wrong credentials. Please try again!\");\n          swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\n        } else if (result.status == \"success\") {\n          setUserSession(btoa(result.data[0]), result.data[0][\"MPS_USERNAME\"], result.data[0][\"MPS_USERIC\"], result.data[0][\"MPS_USEREMAIL\"]);\n          props.history.push('/home');\n        }\n      }).catch(error => {\n        console.log(error);\n        swal(\"Opss!\", \"Something went wrong. Please contact your administrator!\", \"error\").then(value => {//props.history.push('/');\n        });\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray\",\n    children: [/*#__PURE__*/_jsxDEV(IndexNavbar, {\n      fixed: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"py-20 px-5 relative\",\n      style: {\n        background: \"rgb(34,81,122)\",\n        background: \"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"min-h-screen flex items-center justify-center  px-4 sm:px-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"max-w-md w-full\",\n          style: {\n            marginTop: \"-100px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              class: \"mx-auto w-auto\",\n              src: logo1,\n              alt: \"mymps\",\n              style: {\n                height: \"120px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              class: \"mt-6 text-center text-xl leading-9 font-extrabold text-white\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            class: \"mt-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"hidden\",\n              name: \"remember\",\n              value: \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"rounded-md shadow-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  \"aria-label\": \"Email\",\n                  ...username,\n                  name: \"email\",\n                  type: \"email\",\n                  required: true,\n                  class: \"mb-2 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",\n                  placeholder: \"Kad Pengenalan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"-mt-px\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  \"aria-label\": \"Password\",\n                  ...password,\n                  name: \"password\",\n                  type: \"password\",\n                  required: true,\n                  class: \"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",\n                  placeholder: \"Kata Laluan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mt-6 flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"flex items-center\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/register\",\n                  class: \"text-sm text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\",\n                  children: \"Daftar Pengguna\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"text-sm leading-5\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/forgotpassword\",\n                  class: \"font-medium text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\",\n                  children: \"Terlupa kata laluan ?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mt-6 flex flex-wrap\",\n              children: [/*#__PURE__*/_jsxDEV(GoogleLogin, {\n                clientId: \"438559173225-ub4mfh6vkmnd0qntmper0a48gqv18nn5.apps.googleusercontent.com\",\n                onSuccess: responseGoogle,\n                render: renderProps => /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"button\",\n                  onClick: renderProps.onClick,\n                  disabled: renderProps.disabled,\n                  class: \"mb-3 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-gray-600 hover:bg-gray-500 hover:text-gray focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n                  fullWidth: true,\n                  variant: \"contained\",\n                  style: {\n                    marginTop: \"-10px\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: ggl,\n                    style: {\n                      width: \"15px\",\n                      height: \"15px\",\n                      marginRight: \"7px\",\n                      marginTop: \"2px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 29\n                  }, this), \"Google\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 25\n                }, this),\n                buttonText: \"Login\",\n                cookiePolicy: 'single_host_origin'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleLogin,\n                class: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-green-600 hover:bg-green-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n                children: loading ? 'Loading...' : 'Login'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"tPQPH8iN8j04Dai1L3YP0F6HH9A=\", false, function () {\n  return [useFormInput, useFormInput];\n});\n\n_c = Login;\n\nconst useFormInput = initialValue => {\n  _s2();\n\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  return {\n    value,\n    onChange: handleChange\n  };\n};\n\n_s2(useFormInput, \"L08zUdRTae9t+nWvf9xbU6NcRrM=\");\n\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/syahrilsulaiman/mps_new_version/src/Login.js"],"names":["react","useState","setUserSession","TextInputField","Heading","Button","BuildIcon","logo1","GoogleLogin","setGoogleToken","IndexNavbar","Footer","swal","Login","props","sessionStorage","removeItem","responseGoogle","response","console","log","email","profileObj","googleToken","tokenId","googlename","givenName","formdata","FormData","append","requestOptions","method","body","redirect","urlAPI1","fetch","then","json","result","setLoading","status","btoa","data","history","push","catch","error","value","username","useFormInput","password","setError","loading","handleLogin","sha256","require","background","marginTop","height","renderProps","onClick","disabled","ggl","width","marginRight","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import react, {useState} from \"react\";\nimport { setUserSession } from './Utils/Common';\nimport { TextInputField, Heading, Button, BuildIcon } from \"evergreen-ui\";\nimport logo1 from \"./assets/img/logo1.png\";\nimport GoogleLogin from 'react-google-login';\nimport { setGoogleToken } from './Utils/Common';\n\nimport IndexNavbar from \"./components/Navbars/IndexNavbar2.js\";\nimport Footer from \"./components/Footers/Footer\";\nimport ggl from \"./assets/img/google-icon.svg\";\nimport swal from \"sweetalert\";\n\nfunction Login(props){\n\n    sessionStorage.removeItem('GoogleToken');\n    sessionStorage.removeItem('GoogleEmail');\n    sessionStorage.removeItem('GoogleName');\n\n    const responseGoogle = (response) => {\n\n        console.log(response);\n        var email       = response.profileObj.email;\n        var googleToken = response.tokenId;\n        var googlename  = response.profileObj.givenName;\n\n        setGoogleToken(googleToken, email, googlename);\n\n        var formdata = new FormData();\n        formdata.append(\"email\", email);\n\n        var requestOptions = {\n            method: 'POST',\n            body: formdata,\n            redirect: 'follow'\n        };\n\n        var urlAPI1 = 'https://mymps.corrad.my/int/api_generator.php?api_name=check_user';\n\n        fetch(urlAPI1 , requestOptions)\n        .then(response => response.json())\n        .then(result => {\n\n            setLoading(false);\n\n            if(result.status == \"success\")\n            {\n                setUserSession(btoa(result.data[0]), result.data[0][\"MPS_USERNAME\"], result.data[0][\"MPS_USERIC\"], result.data[0][\"MPS_USEREMAIL\"], result.data[0][\"MPS_USERROLE\"]);\n                props.history.push('/home');\n            }\n            else if(result.status == \"unsuccess\")\n            {\n                props.history.push(\"./verifyuser\");\n            }\n        })\n        .catch(error => {\n            console.log(error);\n            swal(\"Opss!\", \"Something went wrong. Please contact your administrator!\", \"error\")\n            .then((value) => {\n                //props.history.push('/');\n            })\n        });\n        \n    }\n\n    const username = useFormInput(\"\");\n    const password = useFormInput(\"\");\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    const handleLogin = () => {\n        setError(null);\n        setLoading(true);\n\n        if(username.value == \"\" || password.value == \"\"){\n\n            swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\n            setLoading(false);\n\n        }else{\n\n            var sha256 = require('js-sha256');\n\n            var formdata = new FormData();\n            formdata.append(\"email\", username.value);\n            formdata.append(\"password\", sha256(password.value));\n\n            var requestOptions = {\n                method: 'POST',\n                body: formdata,\n                redirect: 'follow'\n            };\n\n            var urlAPI1 = 'https://mymps.corrad.my/int/api_generator.php?api_name=api_login';\n\n            fetch(urlAPI1 , requestOptions)\n            .then(response => response.json())\n            .then(result => {\n\n                setLoading(false);\n\n                if(result.status == \"unsuccess\")\n                {\n                    console.log(\"Wrong credentials. Please try again!\");\n                    swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\n                }\n                else if(result.status == \"success\")\n                {\n                    setUserSession(btoa(result.data[0]), result.data[0][\"MPS_USERNAME\"], result.data[0][\"MPS_USERIC\"], result.data[0][\"MPS_USEREMAIL\"]);\n                    props.history.push('/home');\n                }\n\n            })\n            .catch(error => {\n\n                console.log(error);\n                swal(\"Opss!\", \"Something went wrong. Please contact your administrator!\", \"error\")\n                .then((value) => {\n                    //props.history.push('/');\n                })\n\n            });\n        }\n        \n\n    }\n\n    return (\n        <div className=\"bg-gray\">\n            <IndexNavbar fixed />\n        <section className=\"py-20 px-5 relative\" style={{background: \"rgb(34,81,122)\", background: \"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\"}}>\n        <div class=\"min-h-screen flex items-center justify-center  px-4 sm:px-6\">\n            <div class=\"max-w-md w-full\" style={{marginTop: \"-100px\"}}>\n                <div>\n                <img class=\"mx-auto w-auto\" src={logo1} alt=\"mymps\" style={{height: \"120px\"}}/>\n                <h2 class=\"mt-6 text-center text-xl leading-9 font-extrabold text-white\">\n                    Login\n                </h2>\n                </div>\n                <form class=\"mt-8\">\n                <input type=\"hidden\" name=\"remember\" value=\"true\" />\n                <div class=\"rounded-md shadow-sm\">\n                    <div>\n                    <input aria-label=\"Email\" {...username} name=\"email\" type=\"email\" required class=\"mb-2 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\" placeholder=\"Kad Pengenalan\" />\n                    </div>\n                    <div class=\"-mt-px\">\n                    <input aria-label=\"Password\" {...password} name=\"password\" type=\"password\" required class=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\" placeholder=\"Kata Laluan\" />\n                    </div>\n                </div>\n\n                <div class=\"mt-6 flex items-center justify-between\">\n                    <div class=\"flex items-center\">\n                    <a href=\"/register\" class=\"text-sm text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\">\n                        Daftar Pengguna\n                    </a>\n                    </div>\n\n                    <div class=\"text-sm leading-5\">\n                    <a href=\"/forgotpassword\" class=\"font-medium text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\">\n                        Terlupa kata laluan ?\n                    </a>\n                    </div>\n                </div>\n\n                <div class=\"mt-6 flex flex-wrap\">\n                    <GoogleLogin\n                        clientId=\"438559173225-ub4mfh6vkmnd0qntmper0a48gqv18nn5.apps.googleusercontent.com\"\n                        onSuccess={responseGoogle}\n                        render={renderProps => (\n                        <Button \n                            type=\"button\"\n                            onClick={renderProps.onClick} \n                            disabled={renderProps.disabled}\n                            class=\"mb-3 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-gray-600 hover:bg-gray-500 hover:text-gray focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                            fullWidth\n                            variant=\"contained\"\n                            style={{marginTop:\"-10px\"}}\n                        >\n                            <img src={ggl} style={{width: \"15px\", height: \"15px\", marginRight: \"7px\", marginTop: \"2px\"}} /> \n                            Google\n                        </Button>\n                        )}\n                        buttonText=\"Login\"\n                        cookiePolicy={'single_host_origin'}\n                    />\n                    <button type=\"button\" onClick={handleLogin} class=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-green-600 hover:bg-green-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\">\n                        {loading ? 'Loading...' : 'Login'}\n                    </button>\n                </div>\n                </form>\n            </div>\n        </div>\n        </section>\n        {/* <section className=\"pb-16 bg-gray-300 relative pt-32\">\n            <div className=\"container mx-auto\">\n                <div className=\"flex flex-wrap justify-center bg-white shadow-2xl rounded-lg -mt-64 py-16 px-10 relative z-10\">\n                    <div className=\"w-full text-center lg:w-8/12\">\n                    <p className=\"text-center\">\n                        <img className=\"mx-auto\" src={logo1} style={{height:\"150px\", width:\"150px\"}}></img>\n                    </p>\n                    <Heading size={700} marginTop=\"default\">Login MyMPS</Heading>\n                    <p className=\"text-gray-600 text-lg leading-relaxed mt-4 mb-4\">\n                        Cause if you do, it can be yours now. Hit the buttons below to\n                        navigate to get the Free version for your next project. Build a\n                        new web app or give an old project a new look!\n                    </p>\n                    <div className=\"sm:block flex flex-col mt-10\">\n                        <div className=\"text-left p-5\">\n                        <TextInputField\n                            label=\"KATA NAMA / USERNAME\"\n                            //hint=\"This is a hint.\"\n                            placeholder=\"cth: 203451057890\"\n                            onKeyUp={handleNumber}\n                            {...username}\n                        />\n\n                        <TextInputField\n                            label=\"KATA LALUAN / PASSWORD\"\n                            //hint=\"This is a hint.\"\n                            placeholder=\"cth: abcd1234@^\"\n                            type=\"password\" \n                            {...password}\n                        />\n                        </div>\n                    \n                        <div className=\"top-29-px\">\n\n                            <Button \n                                marginRight={16} \n                                appearance=\"primary\" \n                                intent=\"success\"\n                                value={loading ? 'Loading...' : 'Login'} \n                                onClick={handleLogin} \n                                disabled={loading}\n                            >\n                                    Login\n                            </Button>\n\n                            <Button \n                                marginRight={16} \n                                appearance=\"primary\" \n                                intent=\"none\"\n                                onClick={ () => window.location.href = \"/daftar\"}\n                            >\n                            Daftar\n                            </Button>\n\n                        </div>\n                    </div>\n                    <div className=\"text-center mt-16\"></div>\n                    </div>\n                </div>\n            </div>\n        </section> */}\n        <Footer />\n        </div>\n    )\n    \n}\n\nconst useFormInput = initialValue => {\n    const [value, setValue] = useState(initialValue);\n   \n    const handleChange = e => {\n      setValue(e.target.value);\n    }\n    return {\n      value,\n      onChange: handleChange\n    }\n  }\n   \nexport default Login;"]},"metadata":{},"sourceType":"module"}