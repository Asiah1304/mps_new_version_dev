{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import axios from'axios';import swal from'sweetalert';import Carian from'./Carian';export default function Search(_ref){var type=_ref.type;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),display=_useState6[0],setDisplay=_useState6[1];var _useState7=useState({noakaun:'',nama_pemilik:'',nokp:'',add_harta:'',type:''}),_useState8=_slicedToArray(_useState7,2),bill=_useState8[0],setBill=_useState8[1];useEffect(function(){console.log(type);},[type]);var handleChange=function handleChange(e){setSearch(e.target.value);};var searchType=\"\";var handleSubmit=function handleSubmit(e){setLoading(true);e.preventDefault();axios.get('https://mymps.corrad.my/int/api_generator.php?api_name=searchBill',{params:{search:search,type:type}}).then(function(res){if(type==='nokp'){searchType='No Kad Pengenalan';if(res.data.status==='FAILED'){setDisplay(false);swal('Tidak ditemui',searchType+' tidak ditemui','error');}else{setDisplay(true);setBill(_objectSpread(_objectSpread({},bill),{},{nama_pemilik:res.data[0].NAMA_PEMILIK,noakaun:res.data[0].NOAKAUN,nokp:res.data[0].NOKP,add_harta:res.data[0].ADDRHARTA,type:type}));}}if(type==='akaun'){searchType='Akaun';if(res.data.status==='FAILED'){setDisplay(false);swal('Tidak ditemui',searchType+' tidak ditemui','error');}else{setDisplay(true);setBill(_objectSpread(_objectSpread({},bill),{},{nama_pemilik:res.data[0].NAMA_PEMILIK,noakaun:res.data[0].NOAKAUN,nokp:res.data[0].NOKP,add_harta:res.data[0].ADDRHARTA,type:type}));}}if(type==='ssm'){searchType='No SSM';res=JSON.parse(res.data);console.log(res[0]);if(res.status==='FAILED'){setDisplay(false);swal('Tidak ditemui',searchType+' tidak ditemui','error');}else{setDisplay(true);setBill(_objectSpread(_objectSpread({},bill),{},{nama_pemilik:res[0].NAMA_PEMILIK,noakaun:res[0].NOAKAUN,nokp:res[0].NOKP,add_harta:res[0].ADDRHARTA,type:type}));}}setLoading(false);});};if(type===''){return/*#__PURE__*/_jsx(\"div\",{className:\"\"});}else{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-gray-600 pt-4 pb-4\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 md:px-10 mx-auto w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full px-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative flex flex-col min-w-0 break-words rounded mb-6\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{\"aria-label\":\"search\",id:\"search\",name:\"search\",onChange:function onChange(e){return handleChange(e);},type:\"text\",required:true,className:\"mb-2 bg-white appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",placeholder:type==='akaun'?'No Akaun':type==='ssm'?'No ROC / ROB Syarikat':type==='nokp'?'No Kad Pengenalan':'Carian...'})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-initial flex-row-reverse pt-4 pb-4\",children:/*#__PURE__*/_jsx(\"button\",{id:\"type\",type:\"submit\",className:\"text-white text-center bg-green-500 flex-row-reverse rounded-full w-32 h-12\",children:loading?'Mencari..':'Cari'})})]})}),/*#__PURE__*/_jsx(Carian,{bill:bill,display:display})]})});}}","map":{"version":3,"sources":["C:/Users/Admin/mps_new_version_dev/src/Search.js"],"names":["React","useState","useEffect","axios","swal","Carian","Search","type","search","setSearch","loading","setLoading","display","setDisplay","noakaun","nama_pemilik","nokp","add_harta","bill","setBill","console","log","handleChange","e","target","value","searchType","handleSubmit","preventDefault","get","params","then","res","data","status","NAMA_PEMILIK","NOAKAUN","NOKP","ADDRHARTA","JSON","parse"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from 'react'\r\nimport axios from 'axios';\r\nimport swal from 'sweetalert'\r\nimport Carian from './Carian'\r\n\r\nexport default function Search({type}){\r\n\r\n    const [search,setSearch] = useState('');\r\n    const [loading,setLoading] = useState(false);\r\n    const [display,setDisplay] = useState(false);\r\n    const [bill,setBill] = useState({\r\n        noakaun:'',\r\n        nama_pemilik: '',\r\n        nokp: '',\r\n        add_harta: '',\r\n        type:''\r\n    });\r\n\r\n    useEffect(() =>{\r\n        console.log(type)\r\n    },[type]);\r\n    \r\n    const handleChange = (e) => {\r\n        setSearch(e.target.value);\r\n    }\r\n\r\n    let searchType = \"\";\r\n    const handleSubmit = (e) => {\r\n        setLoading(true);\r\n        e.preventDefault();\r\n        axios.get('https://mymps.corrad.my/int/api_generator.php?api_name=searchBill',{\r\n            params: {\r\n                search:search,\r\n                type:type\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(type === 'nokp'){\r\n                searchType = 'No Kad Pengenalan';\r\n\r\n                if(res.data.status === 'FAILED'){\r\n                    setDisplay(false);\r\n                    swal('Tidak ditemui',searchType+' tidak ditemui','error');\r\n                }\r\n                else{\r\n                    setDisplay(true);\r\n                    setBill({\r\n                        ...bill,\r\n                        nama_pemilik:res.data[0].NAMA_PEMILIK,\r\n                        noakaun:res.data[0].NOAKAUN,\r\n                        nokp:res.data[0].NOKP,\r\n                        add_harta:res.data[0].ADDRHARTA,\r\n                        type\r\n                    });\r\n                }}\r\n\r\n            if(type === 'akaun'){\r\n                searchType = 'Akaun';\r\n\r\n                if(res.data.status === 'FAILED'){\r\n                    setDisplay(false);\r\n                    swal('Tidak ditemui',searchType+' tidak ditemui','error');\r\n                }\r\n                else{\r\n                    setDisplay(true);\r\n                    setBill({\r\n                        ...bill,\r\n                        nama_pemilik:res.data[0].NAMA_PEMILIK,\r\n                        noakaun:res.data[0].NOAKAUN,\r\n                        nokp:res.data[0].NOKP,\r\n                        add_harta:res.data[0].ADDRHARTA,\r\n                        type\r\n                    });\r\n                }\r\n            }\r\n\r\n            if(type === 'ssm'){\r\n                searchType = 'No SSM';\r\n                res = JSON.parse(res.data);\r\n                console.log(res[0]);\r\n                \r\n                if(res.status === 'FAILED'){\r\n                    setDisplay(false);\r\n                    swal('Tidak ditemui',searchType+' tidak ditemui','error');\r\n                }\r\n                else{\r\n                    setDisplay(true);\r\n                    setBill({\r\n                        ...bill,\r\n                        nama_pemilik:res[0].NAMA_PEMILIK,\r\n                        noakaun:res[0].NOAKAUN,\r\n                        nokp:res[0].NOKP,\r\n                        add_harta:res[0].ADDRHARTA,\r\n                        type\r\n                    });\r\n                }\r\n            }\r\n            setLoading(false);\r\n        })\r\n        \r\n    }\r\n\r\n    if(type === '') {\r\n        return (\r\n            <div className=\"\"></div>\r\n        );\r\n    }\r\n    else{\r\n\r\n    return (\r\n        <div>\r\n                {/* Header */}\r\n            <div className=\"relative bg-gray-600 pt-4 pb-4\">\r\n                <form onSubmit= {(e) => handleSubmit(e)}>\r\n                    <div className=\"px-4 md:px-10 mx-auto w-full\">\r\n                        <div className=\"flex flex-wrap\">\r\n                            <div className=\"w-full px-4\">\r\n                                <div className=\"relative flex flex-col min-w-0 break-words rounded mb-6\">\r\n                                        <div>\r\n                                            <input aria-label=\"search\" id=\"search\" name=\"search\" onChange={(e) => handleChange(e)} type=\"text\" required className=\"mb-2 bg-white appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\" \r\n                                            placeholder= {\r\n                                                    type === 'akaun' ? ('No Akaun') \r\n                                                :   type === 'ssm' ? ('No ROC / ROB Syarikat') \r\n                                                :   type === 'nokp' ? ('No Kad Pengenalan') \r\n                                                : ('Carian...')\r\n                                            } />\r\n                                        </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex flex-initial flex-row-reverse pt-4 pb-4\">\r\n                            <button id=\"type\" type=\"submit\" className=\"text-white text-center bg-green-500 flex-row-reverse rounded-full w-32 h-12\">\r\n                                        {loading?'Mencari..':'Cari'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n                <Carian bill={bill} display={display}/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}