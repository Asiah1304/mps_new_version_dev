{"ast":null,"code":"import _objectSpread from\"/Users/syahrilsulaiman/Desktop/mps_new_version_dev-1/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/syahrilsulaiman/Desktop/mps_new_version_dev-1/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState}from\"react\";import swal from\"sweetalert\";// components\nvar useFormInput=function useFormInput(initialValue){var _useState=useState(initialValue),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var handleChange=function handleChange(e){setValue(e.target.value);};return{value:value,onChange:handleChange};};export default function CardSettings(){var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var username=sessionStorage.getItem('username');var email=sessionStorage.getItem('email');var nokp=sessionStorage.getItem('nokp');var handleUpdate=function handleUpdate(){var username=document.getElementById(\"username\").value;var email=document.getElementById(\"email\").value;if(username==\"\"){swal(\"Opss!\",\"Kata nama tidak boleh dikosongkan.\",\"error\");return false;}else if(email==\"\"){swal(\"Opss!\",\"Emel tidak boleh dikosongkan\",\"error\");return false;}else{var formdata=new FormData();formdata.append(\"username\",username.trim());formdata.append(\"email\",email.trim());formdata.append(\"nokp\",nokp);var requestOptions={method:'POST',body:formdata,redirect:'follow'};var urlAPI=\"https://mymps.corrad.my/int/api_generator.php?api_name=update_profile\";fetch(urlAPI,requestOptions).then(function(response){return response.json();}).then(function(result){if(result.status==\"success\"){setLoading(\"false\");swal(\"Berjaya!\",\"Akaun profil anda sudah dikemaskini.\",\"success\");sessionStorage.removeItem('username');sessionStorage.setItem('username',result.data[0][\"MPS_USERNAME\"]);sessionStorage.removeItem('email');sessionStorage.setItem('email',result.data[0]['MPS_USEREMAIL']);window.location.href=\"./setting\";}else{setLoading(\"false\");swal(\"Ralat!\",\"Kemaskini tidak berjaya.\",\"error\");}});}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex flex-col min-w-0 break-words w-full h-full shadow-lg  bg-gray-300 border-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-t bg-white mb-0 px-6 py-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center flex justify-between\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"text-gray-800 text-xl font-bold\",children:\"Akaun Peribadi\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-auto px-4 lg:px-10 py-10 pt-0\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-gray-500 text-sm mt-3 mb-6 font-bold uppercase\",children:\"Maklumat Peribadi\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-6/12 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block uppercase text-gray-700 text-xs font-bold mb-2\",htmlFor:\"grid-password\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",id:\"username\"},username),{},{className:\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\",defaultValue:sessionStorage.getItem(\"username\")}))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-6/12 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block uppercase text-gray-700 text-xs font-bold mb-2\",htmlFor:\"grid-password\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"email\",id:\"email\"},email),{},{className:\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\",defaultValue:sessionStorage.getItem(\"email\")}))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-6/12 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block uppercase text-gray-700 text-xs font-bold mb-2\",htmlFor:\"grid-password\",children:\"NO KAD PENGENALAN\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},nokp),{},{readOnly:true,className:\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-gray-200 rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\",defaultValue:sessionStorage.getItem(\"nokp\")}))]})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-6 border-b-1 border-gray-400\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap mt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-12/12 px-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full mb-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleUpdate,class:\"bg-green-500 hover:bg-green-700 text-white py-2 px-3 rounded float-right\",children:\"Kemaskini\"})})})})]})})]})});}","map":{"version":3,"sources":["/Users/syahrilsulaiman/Desktop/mps_new_version_dev-1/src/components/Cards/CardSettings.js"],"names":["React","useState","swal","useFormInput","initialValue","value","setValue","handleChange","e","target","onChange","CardSettings","error","setError","loading","setLoading","username","sessionStorage","getItem","email","nokp","handleUpdate","document","getElementById","formdata","FormData","append","trim","requestOptions","method","body","redirect","urlAPI","fetch","then","response","json","result","status","removeItem","setItem","data","window","location","href"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport swal from \"sweetalert\";\n\n// components\n\nconst useFormInput = (initialValue) => {\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = (e) => {\n    setValue(e.target.value);\n  };\n  return {\n    value,\n    onChange: handleChange,\n  };\n};\n\nexport default function CardSettings() {\n\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const username  = sessionStorage.getItem('username');\n  const email     = sessionStorage.getItem('email');\n  const nokp      = sessionStorage.getItem('nokp');\n\n  const handleUpdate = () => {\n\n    var username  = document.getElementById(\"username\").value;\n    var email     = document.getElementById(\"email\").value;\n\n    if(username == \"\")\n    {\n      swal(\"Opss!\", \"Kata nama tidak boleh dikosongkan.\",\"error\");\n      return false;\n    }\n    else if(email == \"\")\n    {\n      swal(\"Opss!\", \"Emel tidak boleh dikosongkan\",\"error\");\n      return false;\n    }\n    else\n    {\n\n      var formdata = new FormData();\n\n        formdata.append(\"username\", username.trim());\n        formdata.append(\"email\", email.trim());\n        formdata.append(\"nokp\", nokp);\n\n        var requestOptions = {\n        method: 'POST',\n        body: formdata,\n        redirect: 'follow'\n        };\n\n        var urlAPI = \"https://mymps.corrad.my/int/api_generator.php?api_name=update_profile\";\n\n        fetch(urlAPI, requestOptions)\n        .then(response => response.json())\n        .then(result => {\n\n          if(result.status == \"success\"){\n\n            setLoading(\"false\");\n            swal(\"Berjaya!\",\"Akaun profil anda sudah dikemaskini.\",\"success\");\n\n            sessionStorage.removeItem('username');\n            sessionStorage.setItem('username', result.data[0][\"MPS_USERNAME\"]);\n\n            sessionStorage.removeItem('email');\n            sessionStorage.setItem('email', result.data[0]['MPS_USEREMAIL']);\n\n            window.location.href = \"./setting\";\n\n          }\n          else\n          {\n            setLoading(\"false\");\n            swal(\"Ralat!\",\"Kemaskini tidak berjaya.\",\"error\");\n          }\n\n        })\n    }\n  }\n\n  return (\n    <>\n      <div className=\"relative flex flex-col min-w-0 break-words w-full h-full shadow-lg  bg-gray-300 border-0\">\n        <div className=\"rounded-t bg-white mb-0 px-6 py-6\">\n          <div className=\"text-center flex justify-between\">\n            <h6 className=\"text-gray-800 text-xl font-bold\">Akaun Peribadi</h6>\n          </div>\n        </div>\n        <div className=\"flex-auto px-4 lg:px-10 py-10 pt-0\">\n          <form>\n            <h6 className=\"text-gray-500 text-sm mt-3 mb-6 font-bold uppercase\">\n              Maklumat Peribadi\n            </h6>\n            <div className=\"flex flex-wrap\">\n              <div className=\"w-full lg:w-6/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    Username\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"username\"\n                    {...username}\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue={sessionStorage.getItem(\"username\")}\n                  />\n                </div>\n              </div>\n              <div className=\"w-full lg:w-6/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    Email address\n                  </label>\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    {...email}\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue={sessionStorage.getItem(\"email\")}\n                  />\n                </div>\n              </div>\n              <div className=\"w-full lg:w-6/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    NO KAD PENGENALAN\n                  </label>\n                  <input\n                    type=\"text\"\n                    {...nokp}\n                    readOnly\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-gray-200 rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue={sessionStorage.getItem(\"nokp\")}\n                  />\n                </div>\n              </div>\n              {/* <div className=\"w-full lg:w-6/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    Last Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue=\"Jesse\"\n                  />\n                </div>\n              </div> */}\n            </div>\n\n            <hr className=\"mt-6 border-b-1 border-gray-400\" />\n\n            <div className=\"flex flex-wrap mt-6\">\n              <div className=\"w-full lg:w-12/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <button type=\"button\" onClick={handleUpdate} class=\"bg-green-500 hover:bg-green-700 text-white py-2 px-3 rounded float-right\">\n                    Kemaskini\n                  </button>\n                </div>\n              </div>\n            </div>\n            {/* <h6 className=\"text-gray-500 text-sm mt-3 mb-6 font-bold uppercase\">\n              Contact Information\n            </h6>\n            <div className=\"flex flex-wrap\">\n              <div className=\"w-full lg:w-12/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    Address\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue=\"Bld Mihail Kogalniceanu, nr. 8 Bl 1, Sc 1, Ap 09\"\n                  />\n                </div>\n              </div>\n              <div className=\"w-full lg:w-4/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    City\n                  </label>\n                  <input\n                    type=\"email\"\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue=\"New York\"\n                  />\n                </div>\n              </div>\n              <div className=\"w-full lg:w-4/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    Country\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue=\"United States\"\n                  />\n                </div>\n              </div>\n              <div className=\"w-full lg:w-4/12 px-4\">\n                <div className=\"relative w-full mb-3\">\n                  <label\n                    className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\n                    htmlFor=\"grid-password\"\n                  >\n                    Postal Code\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150\"\n                    defaultValue=\"Postal Code\"\n                  />\n                </div>\n              </div>\n            </div> */}\n          </form>\n        </div>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}