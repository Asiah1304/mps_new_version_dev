{"ast":null,"code":"import _slicedToArray from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component,useState,useEffect}from'react';import axios from'axios';import{getNOKP}from'./Utils/Common';import swal from'sweetalert';export default function BillList(){sessionStorage.removeItem(\"cukai\");var nokp=getNOKP();var displayKP='<h5 className=\"uppercase font-medium text-xs text-gray-600\">No Kad Pengenalan </h5>';var handleViewBill=function handleViewBill(e){// set=[e.target.id]\n// return (\n// \t senarai = <Senarai />\nconsole.log('View');sessionStorage.setItem(\"noakaun\",btoa(btoa(e)));window.location.href=\"/senaraibill\";};var handleBayar=function handleBayar(e,a){console.log('Bayar');sessionStorage.setItem(\"cukai\",btoa(btoa(e)));sessionStorage.setItem(\"amaun\",btoa(btoa(a)));window.location.href='/payment?Cukai='+e;};var _useState=useState({data:[]}),_useState2=_slicedToArray(_useState,2),dataset=_useState2[0],setDataSet=_useState2[1];useEffect(function(){// let mounted = true;\n// const formData = new FormData();\n// formData.append('nokp',nokp);\n// const loadData = async () =>{\n//     const res = await axios.post('https://mymps.corrad.my/int/api_generator.php?api_name=showBill',formData);\n//     if(mounted){\n//         console.log(res.data)\n//         if(res.data.status === 'success'){\n//             // swal('jadi','x','success');\n//             setDataSet({\n//                 data:res.data.data\n//             })\n//         }\n//         else{\n//             swal('Tiada Akaun Didaftarkan','Sila menambah akaun untuk dibayar','info');\n//         }\n//     }\n// }\n// loadData();\n// return () => {\n//     mounted = false;\n// }\nvar formData=new FormData();formData.append('nokp',nokp);axios.post('https://mymps.corrad.my/int/api_generator.php?api_name=showBill',formData).then(function(res){console.log(res.data);if(res.data.status==='success'){// swal('jadi','x','success');\nsetDataSet({data:res.data.data});}else{swal('Tiada bil didaftarkan','Sila tambah bil anda dengan klik pada + Tambah','info');}}).catch(function(err){console.log(err);swal('Ralat','Sila hubungi pentadbir sistem!','error');});},[]);var emptyHandler=function emptyHandler(){console.log('Test Handler');};var bills=dataset.data.length?dataset.data.map(function(bill){return/*#__PURE__*/_jsx(\"div\",{className:\"px-4 md:px-2 mx-auto w-full\",onClick://betulkan status***\nbill.STATUS==='TERTUNGGAK'||bill.status=='TERTUNGGAK'?function(){return handleBayar(bill.code,bill.amaun);}:function(){return handleViewBill(bill.NOAKAUN);},children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full px-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative flex flex-col min-w-0 break-words bg-white rounded mb-6 shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-auto p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row pt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full pr-4 max-w-full flex-grow flex-1\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"uppercase font-medium text-xs text-gray-600\",children:[\"No Kad Pengenalan: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-sm text-gray-800\",children:bill.NOKP===null?'-':bill.NOKP})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full pr-4 max-w-full flex-grow flex-1\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"uppercase font-medium text-xs text-gray-600\",children:[\"No Akaun: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-sm text-gray-800\",children:bill.NOAKAUN})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full pr-4 max-w-full flex-grow flex-1\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"uppercase font-medium text-xs text-gray-600\",children:[\"Nama Pemilik: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-sm text-gray-800\",children:bill.NAMA_PEMILIK})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row pb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full pr-4 max-w-full flex-grow flex-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"uppercase font-medium text-xs text-gray-600\",children:\"Alamat Harta\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-xs text-gray-800\",children:bill.ADDRHARTA})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative w-auto pl-4 flex-initial\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"uppercase font-medium text-xs\"+(bill.STATUS==='TERTUNGGAK'?\" text-red-600\":\" text-green-600\"),children:bill.STATUS==='PAID'?'Telah dibayar':'tertunggak'})})]})]})})})})},bill.NOAKAUN);}):/*#__PURE__*/_jsx(\"div\",{});return/*#__PURE__*/_jsx(\"div\",{className:\"\",children:bills});}","map":{"version":3,"sources":["C:/Users/Admin/mps_new_version_dev/src/BillList.js"],"names":["React","Component","useState","useEffect","axios","getNOKP","swal","BillList","sessionStorage","removeItem","nokp","displayKP","handleViewBill","e","console","log","setItem","btoa","window","location","href","handleBayar","a","data","dataset","setDataSet","formData","FormData","append","post","then","res","status","catch","err","emptyHandler","bills","length","map","bill","STATUS","code","amaun","NOAKAUN","NOKP","NAMA_PEMILIK","ADDRHARTA"],"mappings":"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","sourcesContent":["import React, {Component, useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\nimport {getNOKP} from './Utils/Common';\r\nimport swal from 'sweetalert';\r\n\r\nexport default function BillList(){\r\n\r\n    sessionStorage.removeItem(\"cukai\");\r\n    const nokp = getNOKP();\r\n    const displayKP = '<h5 className=\"uppercase font-medium text-xs text-gray-600\">No Kad Pengenalan </h5>'\r\n    const handleViewBill = (e) => {\r\n\t\t// set=[e.target.id]\r\n\t\t// return (\r\n\t\t// \t senarai = <Senarai />\r\n        console.log('View');\r\n        sessionStorage.setItem(\"noakaun\", btoa(btoa(e)));\r\n        window.location.href = \"/senaraibill\";\r\n        \r\n    }\r\n    \r\n    const handleBayar = (e,a) => {\r\n\t\tconsole.log('Bayar');\r\n\t\tsessionStorage.setItem(\"cukai\", btoa(btoa(e)));\r\n\t\tsessionStorage.setItem(\"amaun\", btoa(btoa(a)));\r\n        window.location.href = '/payment?Cukai='+e;\r\n    }\r\n    \r\n    const [dataset, setDataSet] = useState({\r\n        data: []\r\n    });\r\n\r\n    \r\n    useEffect (() => {\r\n        // let mounted = true;\r\n        // const formData = new FormData();\r\n        // formData.append('nokp',nokp);\r\n\r\n        // const loadData = async () =>{\r\n        //     const res = await axios.post('https://mymps.corrad.my/int/api_generator.php?api_name=showBill',formData);\r\n        //     if(mounted){\r\n        //         console.log(res.data)\r\n        //         if(res.data.status === 'success'){\r\n        //             // swal('jadi','x','success');\r\n        //             setDataSet({\r\n        //                 data:res.data.data\r\n        //             })\r\n        //         }\r\n        //         else{\r\n        //             swal('Tiada Akaun Didaftarkan','Sila menambah akaun untuk dibayar','info');\r\n        //         }\r\n        //     }\r\n        // }\r\n        // loadData();\r\n        // return () => {\r\n        //     mounted = false;\r\n        // }\r\n\r\n\r\n        const formData = new FormData();\r\n        formData.append('nokp',nokp);\r\n        axios.post('https://mymps.corrad.my/int/api_generator.php?api_name=showBill',formData)\r\n        .then(res => {\r\n            console.log(res.data)\r\n            if(res.data.status === 'success'){\r\n                // swal('jadi','x','success');\r\n                setDataSet({\r\n                    data:res.data.data\r\n                })\r\n            }\r\n            else{\r\n                swal('Tiada bil didaftarkan','Sila tambah bil anda dengan klik pada + Tambah','info');\r\n            }\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            swal('Ralat','Sila hubungi pentadbir sistem!','error');\r\n        })\r\n\r\n    },[])\r\n\r\n\r\n    const emptyHandler = () => {\r\n        console.log('Test Handler');\r\n    }\r\n\r\n    const bills = dataset.data.length ? (\r\n        dataset.data.map(bill => {\r\n            return (\r\n                <div className=\"px-4 md:px-2 mx-auto w-full\"\r\n                 onClick={\r\n                     //betulkan status***\r\n                     (bill.STATUS === 'TERTUNGGAK' || bill.status == 'TERTUNGGAK') ? (() => handleBayar(bill.code, bill.amaun)):(() => handleViewBill(bill.NOAKAUN))\r\n                    }\r\n                key = {bill.NOAKAUN}>\r\n                    <div className=\"flex flex-wrap\">\r\n                        <div className=\"w-full px-4\">\r\n                            <div className=\"relative flex flex-col min-w-0 break-words bg-white rounded mb-6 shadow-lg\">\r\n                                <div className=\"flex-auto p-4\">\r\n                                    <div className=\"flex flex-row pt-4\">\r\n                                        <div className=\"relative w-full pr-4 max-w-full flex-grow flex-1\">\r\n                                            <h5 className=\"uppercase font-medium text-xs text-gray-600\">No Kad Pengenalan: <span className=\"font-semibold text-sm text-gray-800\">{ (bill.NOKP === null) ? '-' : bill.NOKP }</span></h5>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-row pb-4\">\r\n                                        <div className=\"relative w-full pr-4 max-w-full flex-grow flex-1\">\r\n                                            <h5 className=\"uppercase font-medium text-xs text-gray-600\">No Akaun: <span className=\"font-semibold text-sm text-gray-800\">{ bill.NOAKAUN }</span></h5>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-row pb-4\">\r\n                                        <div className=\"relative w-full pr-4 max-w-full flex-grow flex-1\">\r\n                                            <h5 className=\"uppercase font-medium text-xs text-gray-600\">Nama Pemilik: <span className=\"font-semibold text-sm text-gray-800\">{ bill.NAMA_PEMILIK }</span></h5>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-row pb-4\">\r\n                                        <div className=\"relative w-full pr-4 max-w-full flex-grow flex-1\">\r\n                                            <h5 className=\"uppercase font-medium text-xs text-gray-600\">Alamat Harta</h5>\r\n                                            <span className=\"font-semibold text-xs text-gray-800\">{ bill.ADDRHARTA }</span>\t\r\n                                        </div>\r\n                                        <div className=\"relative w-auto pl-4 flex-initial\" >\r\n                                            <h5 \r\n                                                className={\"uppercase font-medium text-xs\"+(bill.STATUS === 'TERTUNGGAK' ? \" text-red-600\" : \" text-green-600\")}>\r\n                                                {\r\n                                                    bill.STATUS === 'PAID' ? 'Telah dibayar' : 'tertunggak'\r\n                                                }\r\n                                            </h5>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        })\r\n    ) : (\r\n        <div></div>\r\n    )\r\n\r\n    return (\r\n        <div className=\"\">\r\n            {bills}\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}