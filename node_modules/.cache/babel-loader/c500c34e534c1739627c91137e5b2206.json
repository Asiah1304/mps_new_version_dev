{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import react,{useState}from\"react\";import{setUserSession}from'./Utils/Common';import logo1 from\"./assets/img/logo1.png\";import ReCAPTCHA from\"react-google-recaptcha\";import noScroll from\"no-scroll\";import IndexNavbar from\"./components/Navbars/IndexNavbar2.js\";import Footer from\"./components/Footers/Footer\";import swal from\"sweetalert\";import{Button,Heading,Pane,ArrowLeftIcon,ArrowRightIcon}from\"evergreen-ui\";function onChange(value){console.log(\"Captcha value:\",value);}function ForgetPassword(props){noScroll.on();var username=useFormInput(\"\");var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleForgetPassword=function handleForgetPassword(){setError(null);setLoading(true);if(username.value==\"\"){swal(\"Opss!\",\"Emel tidak boleh dikosongkan.\",\"error\");setLoading(false);}else{var formdata=new FormData();formdata.append(\"username\",username.value);var requestOptions={method:'POST',body:formdata,redirect:'follow'};var urlAPI1='https://mymps.corrad.my/int/api_generator.php?api_name=change_password';fetch(urlAPI1,requestOptions).then(function(response){return response.json();}).then(function(result){setLoading(false);if(result.status==\"unsuccess\"){console.log(result);swal(\"Opss!\",\"Sila pastikan emel anda telah diisi dan sah.\",\"error\");return false;}else if(result.status==\"pending\"){console.log(result);swal(\"Harap Maaf!\",\"Akaun ini mesti menunggu 10 minit sebelum ingin menukar kata laluan yang baru.\",\"error\");return false;}else if(result.status==\"success\"){console.log(result);swal(\"Berjaya\",\"Sila semak emel anda untuk mendapatkan kata laluan yang baharu.\",\"success\");props.history.push(\"/login\");}}).catch(function(error){console.log(error);swal(\"Opss!\",\"Something went wrong. Please contact your administrator!\",\"error\").then(function(value){//props.history.push('/');\n});});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray\",children:[/*#__PURE__*/_jsx(IndexNavbar,{fixed:true}),/*#__PURE__*/_jsx(\"section\",{className:\"py-15 px-5 relative\",style:_defineProperty({background:\"rgb(34,81,122)\"},\"background\",\"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center  px-4 sm:px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full\",style:{marginTop:\"-100px\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"mx-auto w-auto\",src:logo1,alt:\"mymps\",style:{height:\"120px\"}}),/*#__PURE__*/_jsx(Pane,{marginTop:20,children:/*#__PURE__*/_jsx(Heading,{textAlign:\"center\",size:600,color:\"#E4E7EB\",children:\"Set Semula Kata Laluan\"})})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"remember\",value:\"true\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({\"aria-label\":\"username\"},username),{},{name:\"username\",type:\"username\",required:true,className:\"mb-2 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",placeholder:\"Sila masukkan alamat emel anda\"}))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap\",style:{marginTop:\"30px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-6/12 px-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full mb-3\",children:/*#__PURE__*/_jsx(Button,{iconBefore:ArrowLeftIcon,onClick:function onClick(){return window.location.href=\"/login\";},type:\"button\",appearance:\"primary\",intent:\"danger\",display:\"flex\",justifyContent:\"center\",width:\"100%\",children:\"Kembali\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-6/12 px-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full mb-3\",children:/*#__PURE__*/_jsx(Button,{iconBefore:ArrowRightIcon,type:\"button\",onClick:handleForgetPassword,appearance:\"primary\",intent:\"success\",display:\"flex\",justifyContent:\"center\",width:\"100%\",children:loading?'Memuatkan...':'Hantar'})})})]})]})]})})})]});}var useFormInput=function useFormInput(initialValue){var _useState5=useState(initialValue),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];var handleChange=function handleChange(e){setValue(e.target.value);};return{value:value,onChange:handleChange};};export default ForgetPassword;","map":{"version":3,"sources":["C:/Users/Admin/mps_new_version_dev/src/ForgotPassword.js"],"names":["react","useState","setUserSession","logo1","ReCAPTCHA","noScroll","IndexNavbar","Footer","swal","Button","Heading","Pane","ArrowLeftIcon","ArrowRightIcon","onChange","value","console","log","ForgetPassword","props","on","username","useFormInput","error","setError","loading","setLoading","handleForgetPassword","formdata","FormData","append","requestOptions","method","body","redirect","urlAPI1","fetch","then","response","json","result","status","history","push","catch","background","marginTop","height","window","location","href","initialValue","setValue","handleChange","e","target"],"mappings":"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","sourcesContent":["import react, { useState } from \"react\";\r\nimport { setUserSession } from './Utils/Common';\r\nimport logo1 from \"./assets/img/logo1.png\";\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\nimport noScroll from \"no-scroll\";\r\nimport IndexNavbar from \"./components/Navbars/IndexNavbar2.js\";\r\nimport Footer from \"./components/Footers/Footer\";\r\nimport swal from \"sweetalert\";\r\nimport { Button, Heading, Pane, ArrowLeftIcon, ArrowRightIcon } from \"evergreen-ui\";\r\n\r\nfunction onChange(value) {\r\n    console.log(\"Captcha value:\", value);\r\n}\r\n\r\nfunction ForgetPassword(props) {\r\n\r\n    noScroll.on();\r\n\r\n    const username = useFormInput(\"\");\r\n\r\n    const [error, setError] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleForgetPassword = () => {\r\n        setError(null);\r\n        setLoading(true);\r\n\r\n        if (username.value == \"\") {\r\n\r\n            swal(\"Opss!\", \"Emel tidak boleh dikosongkan.\", \"error\");\r\n            setLoading(false);\r\n\r\n        } else {\r\n\r\n            var formdata = new FormData();\r\n            formdata.append(\"username\", username.value);\r\n\r\n            var requestOptions = {\r\n                method: 'POST',\r\n                body: formdata,\r\n                redirect: 'follow'\r\n            };\r\n\r\n            var urlAPI1 = 'https://mymps.corrad.my/int/api_generator.php?api_name=change_password';\r\n\r\n            fetch(urlAPI1, requestOptions)\r\n                .then(response => response.json())\r\n                .then(result => {\r\n\r\n                    setLoading(false);\r\n\r\n                    if (result.status == \"unsuccess\") {\r\n                        console.log(result);\r\n                        swal(\"Opss!\", \"Sila pastikan emel anda telah diisi dan sah.\", \"error\");\r\n                        return false;\r\n                    }\r\n                    else if (result.status == \"pending\") {\r\n                        console.log(result);\r\n                        swal(\"Harap Maaf!\", \"Akaun ini mesti menunggu 10 minit sebelum ingin menukar kata laluan yang baru.\", \"error\");\r\n                        return false;\r\n                    }\r\n                    else if (result.status == \"success\") {\r\n                        console.log(result);\r\n                        swal(\"Berjaya\", \"Sila semak emel anda untuk mendapatkan kata laluan yang baharu.\", \"success\");\r\n                        props.history.push(\"/login\");\r\n                    }\r\n\r\n                })\r\n                .catch(error => {\r\n\r\n                    console.log(error);\r\n                    swal(\"Opss!\", \"Something went wrong. Please contact your administrator!\", \"error\")\r\n                        .then((value) => {\r\n                            //props.history.push('/');\r\n                        })\r\n\r\n                });\r\n        }\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-gray\">\r\n            <IndexNavbar fixed />\r\n            <section className=\"py-15 px-5 relative\" style={{ background: \"rgb(34,81,122)\", background: \"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\" }}>\r\n                <div className=\"min-h-screen flex items-center justify-center  px-4 sm:px-6\">\r\n                    <div className=\"max-w-md w-full\" style={{ marginTop: \"-100px\" }}>\r\n                        <div>\r\n                            <img className=\"mx-auto w-auto\" src={logo1} alt=\"mymps\" style={{ height: \"120px\" }} />\r\n                            <Pane marginTop={20}>\r\n                                <Heading\r\n                                    textAlign=\"center\"\r\n                                    size={600}\r\n                                    color=\"#E4E7EB\"\r\n                                >\r\n                                    Set Semula Kata Laluan\r\n                                </Heading>\r\n                            </Pane>\r\n                        </div>\r\n                        <form className=\"mt-8\">\r\n                            <input type=\"hidden\" name=\"remember\" value=\"true\" />\r\n                            <div className=\"rounded-md shadow-sm\">\r\n                                <div>\r\n                                    <input aria-label=\"username\" {...username} name=\"username\" type=\"username\" required className=\"mb-2 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\" placeholder=\"Sila masukkan alamat emel anda\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-wrap\" style={{ marginTop: \"30px\" }}>\r\n                                <div className=\"w-full lg:w-6/12 px-1\">\r\n                                    <div className=\"relative w-full mb-3\">\r\n                                        <Button iconBefore={ArrowLeftIcon} onClick={() => window.location.href = \"/login\"} type=\"button\" appearance=\"primary\" intent=\"danger\" display=\"flex\" justifyContent=\"center\" width=\"100%\">Kembali</Button>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"w-full lg:w-6/12 px-1\">\r\n                                    <div className=\"relative w-full mb-3\">\r\n                                        <Button iconBefore={ArrowRightIcon} type=\"button\" onClick={handleForgetPassword} appearance=\"primary\" intent=\"success\" display=\"flex\" justifyContent=\"center\" width=\"100%\">{loading ? 'Memuatkan...' : 'Hantar'}</Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            {/* <Footer /> */}\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nconst useFormInput = initialValue => {\r\n    const [value, setValue] = useState(initialValue);\r\n\r\n    const handleChange = e => {\r\n        setValue(e.target.value);\r\n    }\r\n    return {\r\n        value,\r\n        onChange: handleChange\r\n    }\r\n}\r\n\r\nexport default ForgetPassword;"]},"metadata":{},"sourceType":"module"}