{"ast":null,"code":"import _slicedToArray from\"C:/Users/Admin/mps_new_version_dev/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import Axios from'axios';import React,{useState,useEffect}from'react';import swal from'sweetalert';import{getUser,getNOKP,getToken,removeUserSession}from\"./Utils/Common\";export default function Carian(_ref){var bill=_ref.bill,type=_ref.type,display=_ref.display;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var nokp=getNOKP();var accountType=\"\";useEffect(function(){console.log('bill ',bill);if(type==='nokp')accountType='No Kad Pengenalan';if(type==='akaun')accountType='Akaun';if(type==='ssm')accountType='No SSM';},[bill]);var handleAdd=function handleAdd(e){setLoading(true);var formData=new FormData();formData.append('nokp',nokp);formData.append('account',e);// console.log(nokp);\n// console.log(bill.noakaun);\nAxios.post('https://mymps.corrad.my/int/api_generator.php?api_name=newBill',formData).then(function(res){console.log('Response : ',res.data);if(res.data.status===\"success\"){// console.log(res);\nswal('Berjaya Tambah','Berjaya tambah akaun untuk pembayaran','success');window.location.href='/bill';}else if(res.data.status===\"failure\"){swal(\"Tidak Berjaya\",accountType+\" ini telah didaftarkan ke akaun anda.\",\"error\");}else{console.log(res.status);swal('Ralat','Operasi tidak dapat diselesaikan','error');}setLoading(false);}).catch(function(err){console.log('error',err);swal('Ralat','Sila hubungi pentadbir sistem!','error');});};if(!display){return/*#__PURE__*/_jsx(\"div\",{});}else{// Loop array mapping\n// console.log('Carian',bill.length);\n// console.log('Carian Bill',bill);\n// return (<div></div>)\nif(bill.length===1||type==='akaun'){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"px-4 md:px-2 mx-auto w-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex flex-col min-w-0 break-words bg-white rounded mb-6 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-auto p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row pt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full pr-4 max-w-full flex-grow flex-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold uppercase text-lg text-gray-800\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative w-auto pl-4 flex-initial\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold uppercase text-lg text-gray-800\",children:[\"Akaun :\\xA0\",//dataset.amaun\nbill[0].NOAKAUN]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row pb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full pr-4 max-w-full flex-grow flex-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold uppercase text-lg text-gray-800\",children:// dataset.akaun\n// bill.code\nbill[0].NAMA_PEMILIK}),/*#__PURE__*/_jsx(\"h5\",{className:\"uppercase font-medium text-xs text-gray-600\",children:// dataset.tempoh\n// bill.description\nbill[0].ADDRHARTA})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-initial flex-row-reverse pt-4 pb-4\",children:/*#__PURE__*/_jsx(\"button\",{id:\"type\",type:\"button\",onClick:function onClick(e){return handleAdd(bill[0].NOAKAUN);},className:\"text-white text-center bg-green-500 flex-row-reverse rounded-full w-32 h-12\",children:loading?'Menambah..':'Tambah'})})]})})})},bill[0].NOAKAUN)});}else{return/*#__PURE__*/_jsx(\"div\",{children:bill.map(function(bills){return/*#__PURE__*/_jsx(\"div\",{className:\"px-4 md:px-2 mx-auto w-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex flex-col min-w-0 break-words bg-white rounded mb-6 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-auto p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row pt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full pr-4 max-w-full flex-grow flex-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold uppercase text-lg text-gray-800\",children:// dataset.jenis\n// bill.type\nbills.NOKP})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative w-auto pl-4 flex-initial\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold uppercase text-lg text-gray-800\",children:[\"Akaun :\\xA0\",//dataset.amaun\nbills.NOAKAUN]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row pb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full pr-4 max-w-full flex-grow flex-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold uppercase text-lg text-gray-800\",children:// dataset.akaun\n// bill.code\nbills.NAMA_PEMILIK}),/*#__PURE__*/_jsx(\"h5\",{className:\"uppercase font-medium text-xs text-gray-600\",children:// dataset.tempoh\n// bill.description\nbills.ADDRHARTA})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-initial flex-row-reverse pt-4 pb-4\",children:/*#__PURE__*/_jsx(\"button\",{id:\"type\",type:\"button\",onClick:function onClick(e){return handleAdd(bills.NOAKAUN);},className:\"text-white text-center bg-green-500 flex-row-reverse rounded-full w-32 h-12\",children:loading?'Menambah..':'Tambah'})})]})})})},bills.NOAKAUN);})});}}}","map":{"version":3,"sources":["C:/Users/Admin/mps_new_version_dev/src/Carian.js"],"names":["Axios","React","useState","useEffect","swal","getUser","getNOKP","getToken","removeUserSession","Carian","bill","type","display","loading","setLoading","nokp","accountType","console","log","handleAdd","e","formData","FormData","append","post","then","res","data","status","window","location","href","catch","err","length","NOAKAUN","NAMA_PEMILIK","ADDRHARTA","map","bills","NOKP"],"mappings":"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","sourcesContent":["import Axios from 'axios';\r\nimport React, {useState, useEffect} from 'react'\r\nimport swal from 'sweetalert'\r\nimport { getUser, getNOKP, getToken, removeUserSession } from \"./Utils/Common\";\r\n\r\nexport default function Carian({bill,type, display}){\r\n\r\n    const [loading,setLoading] = useState(false);\r\n    const nokp    = getNOKP();\r\n    let accountType = \"\";\r\n\r\n        useEffect(() =>{\r\n            console.log('bill ',bill);\r\n            if(type === 'nokp')\r\n            accountType = 'No Kad Pengenalan';\r\n            if(type === 'akaun')\r\n            accountType = 'Akaun';\r\n            if(type === 'ssm')\r\n            accountType = 'No SSM';\r\n        },[bill]);\r\n\r\n        const handleAdd = (e) => {\r\n            setLoading(true);\r\n            const formData = new FormData();\r\n            formData.append('nokp',nokp);\r\n            formData.append('account',e);\r\n            // console.log(nokp);\r\n            // console.log(bill.noakaun);\r\n            Axios.post('https://mymps.corrad.my/int/api_generator.php?api_name=newBill',formData)\r\n            .then(res => {\r\n\r\n                console.log('Response : ',res.data)\r\n                if(res.data.status === \"success\"){\r\n                    // console.log(res);\r\n                    swal('Berjaya Tambah','Berjaya tambah akaun untuk pembayaran','success');\r\n                    window.location.href = '/bill';\r\n                }\r\n                else if(res.data.status === \"failure\"){\r\n                    swal(\"Tidak Berjaya\",accountType+\" ini telah didaftarkan ke akaun anda.\",\"error\");\r\n                }\r\n                else{\r\n                    console.log(res.status);\r\n                    swal('Ralat','Operasi tidak dapat diselesaikan','error');\r\n                }\r\n\r\n                setLoading(false);\r\n            })\r\n            .catch(err =>{\r\n                console.log('error',err)\r\n                swal('Ralat','Sila hubungi pentadbir sistem!','error');\r\n            });\r\n        }\r\n    \r\n    if(!display){\r\n        return (\r\n            <div>\r\n            </div>\r\n        );\r\n    }\r\n    else{\r\n        // Loop array mapping\r\n        // console.log('Carian',bill.length);\r\n        // console.log('Carian Bill',bill);\r\n        // return (<div></div>)\r\n        if( bill.length === 1 || type === 'akaun' ){\r\n            return (<div>\r\n                        <div key={bill[0].NOAKAUN} className=\"px-4 md:px-2 mx-auto w-full\">\r\n                        <div className=\"flex flex-wrap\">\r\n                            <div className=\"w-full px-4\">\r\n                                <div className=\"relative flex flex-col min-w-0 break-words bg-white rounded mb-6 shadow-lg\">\r\n                                    <div className=\"flex-auto p-4\">\r\n                                        <div className=\"flex flex-row pt-4\">\r\n                                            <div className=\"relative w-full pr-4 max-w-full flex-grow flex-1\">\r\n                                                <span className=\"font-semibold uppercase text-lg text-gray-800\">\r\n                                                {\r\n                                                // dataset.jenis\r\n                                                // bill.type\r\n                                                //    ( typeof bill[0].NOKP !== 'undefined' )? bill[0].NOKP : bill[0].NOSSM\r\n                                                }\r\n                                                </span>\t\r\n                                            </div>\r\n                                            <div className=\"relative w-auto pl-4 flex-initial\">\r\n                                                <span className=\"font-semibold uppercase text-lg text-gray-800\">Akaun :&nbsp;\r\n                                                {\r\n                                                    //dataset.amaun\r\n                                                    bill[0].NOAKAUN\r\n                                                }\r\n                                                </span>\t\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex flex-row pb-4\">\r\n                                            <div className=\"relative w-full pr-4 max-w-full flex-grow flex-1\">\r\n                                                <span className=\"font-semibold uppercase text-lg text-gray-800\">\r\n                                                {\r\n                                                // dataset.akaun\r\n                                                // bill.code\r\n                                                bill[0].NAMA_PEMILIK\r\n                                                }\r\n                                                </span>\t\r\n                                                <h5 className=\"uppercase font-medium text-xs text-gray-600\">\r\n                                                {\r\n                                                // dataset.tempoh\r\n                                                // bill.description\r\n                                                bill[0].ADDRHARTA\r\n                                                }\r\n                                                </h5>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-initial flex-row-reverse pt-4 pb-4\">\r\n                                        <button id=\"type\" type=\"button\" onClick={(e) => handleAdd(bill[0].NOAKAUN)} className=\"text-white text-center bg-green-500 flex-row-reverse rounded-full w-32 h-12\">\r\n                                                    {loading?'Menambah..':'Tambah'}\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n        </div>)\r\n        }\r\n\r\n        else{\r\n        return (\r\n            <div>\r\n\r\n            {\r\n                bill.map(bills => (\r\n                    <div key={bills.NOAKAUN} className=\"px-4 md:px-2 mx-auto w-full\">\r\n                    <div className=\"flex flex-wrap\">\r\n                        <div className=\"w-full px-4\">\r\n                            <div className=\"relative flex flex-col min-w-0 break-words bg-white rounded mb-6 shadow-lg\">\r\n                                <div className=\"flex-auto p-4\">\r\n                                    <div className=\"flex flex-row pt-4\">\r\n                                        <div className=\"relative w-full pr-4 max-w-full flex-grow flex-1\">\r\n                                            <span className=\"font-semibold uppercase text-lg text-gray-800\">\r\n                                            {\r\n                                            // dataset.jenis\r\n                                            // bill.type\r\n                                                bills.NOKP\r\n                                            }\r\n                                            </span>\t\r\n                                        </div>\r\n                                        <div className=\"relative w-auto pl-4 flex-initial\">\r\n                                            <span className=\"font-semibold uppercase text-lg text-gray-800\">Akaun :&nbsp;\r\n                                            {\r\n                                                //dataset.amaun\r\n                                                bills.NOAKAUN\r\n                                            }\r\n                                            </span>\t\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-row pb-4\">\r\n                                        <div className=\"relative w-full pr-4 max-w-full flex-grow flex-1\">\r\n                                            <span className=\"font-semibold uppercase text-lg text-gray-800\">\r\n                                            {\r\n                                            // dataset.akaun\r\n                                            // bill.code\r\n                                            bills.NAMA_PEMILIK\r\n                                            }\r\n                                            </span>\t\r\n                                            <h5 className=\"uppercase font-medium text-xs text-gray-600\">\r\n                                            {\r\n                                            // dataset.tempoh\r\n                                            // bill.description\r\n                                            bills.ADDRHARTA\r\n                                            }\r\n                                            </h5>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex flex-initial flex-row-reverse pt-4 pb-4\">\r\n                                    <button id=\"type\" type=\"button\" onClick={(e) => handleAdd(bills.NOAKAUN)} className=\"text-white text-center bg-green-500 flex-row-reverse rounded-full w-32 h-12\">\r\n                                                {loading?'Menambah..':'Tambah'}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                )\r\n            )\r\n        }\r\n            </div>\r\n        );\r\n    }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}